<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Multi YouTube Embed</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background:#fff; color:#111; }
    .controls { display:flex; gap:10px; align-items:center; margin-bottom:18px; flex-wrap:wrap; }
    input[type="text"] { width:560px; padding:10px; border:2px solid #ccc; border-radius:4px; }
    input[type="number"] { width:90px; padding:8px; border:2px solid #ccc; border-radius:4px; }
    button { padding:10px 18px; border:none; background:#e74c3c; color:white; border-radius:4px; cursor:pointer; font-weight:600; }
    label { font-size:14px; }
    .grid { 
      display: grid; 
      gap: 18px; 
      margin-top: 18px; 
      grid-template-columns: repeat(5, 1fr); /* fixed 5 columns */
    }
    .video-wrap { background:#000; position:relative; padding-top:56.25%; overflow:hidden; border-radius:6px; box-shadow:0 2px 6px rgba(0,0,0,0.12); }
    .video-wrap iframe { position:absolute; top:0; left:0; width:100%; height:100%; border:0; }
    .settings { display:flex; gap:12px; align-items:center; }
    .small { font-size:13px; color:#444; }
  </style>
</head>
<body>
  <h2>Multi YouTube Embed (5 side by side)</h2>

  <div class="controls">
    <input id="url" type="text" placeholder="Paste YouTube link (https://youtu.be/ID or https://www.youtube.com/watch?v=ID)" />
    <input id="count" type="number" min="1" max="20" value="5" />
    <div class="settings">
      <label><input id="autoplay" type="checkbox" /> Autoplay (muted)</label>
      <label style="margin-left:8px;"><input id="controlsToggle" type="checkbox" checked /> Show controls</label>
    </div>
    <button id="make">Create</button>
    <button id="clear" style="background:#888;">Clear</button>
  </div>

  <div id="msg" class="small"></div>
  <div id="grid" class="grid"></div>

<script>
  const urlInput = document.getElementById('url');
  const countInput = document.getElementById('count');
  const makeBtn = document.getElementById('make');
  const grid = document.getElementById('grid');
  const msg = document.getElementById('msg');
  const autoplayCheckbox = document.getElementById('autoplay');
  const controlsToggle = document.getElementById('controlsToggle');
  const clearBtn = document.getElementById('clear');

  function extractYouTubeID(url) {
    if (!url) return null;
    url = url.trim();
    const patterns = [
      /(?:youtube\.com\/watch\?v=|youtube\.com\/embed\/)([A-Za-z0-9_-]{11})/,
      /(?:youtu\.be\/)([A-Za-z0-9_-]{11})/,
      /[?&]v=([A-Za-z0-9_-]{11})/
    ];
    for (const p of patterns) {
      const m = url.match(p);
      if (m && m[1]) return m[1];
    }
    if (/^[A-Za-z0-9_-]{11}$/.test(url)) return url;
    return null;
  }

  function buildEmbedUrl(id, opts){
    let params = new URLSearchParams();
    if (opts.autoplay) { params.set('autoplay', '1'); params.set('mute', '1'); }
    if (!opts.controls) params.set('controls','0');
    params.set('rel','0');
    return `https://www.youtube.com/embed/${id}?${params.toString()}`;
  }

  makeBtn.addEventListener('click', () => {
    grid.innerHTML = '';
    msg.textContent = '';
    const url = urlInput.value;
    const id = extractYouTubeID(url);
    if (!id) {
      msg.textContent = 'Invalid YouTube link / ID â€” check and try again.';
      return;
    }
    let count = parseInt(countInput.value) || 1;
    count = Math.min(Math.max(count,1), 20);
    const opts = { autoplay: autoplayCheckbox.checked, controls: controlsToggle.checked };

    for (let i=0; i<count; i++) {
      const wrap = document.createElement('div');
      wrap.className = 'video-wrap';
      const iframe = document.createElement('iframe');
      iframe.src = buildEmbedUrl(id, opts);
      iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
      if (opts.autoplay) iframe.allow += '; autoplay';
      iframe.allowFullscreen = true;
      wrap.appendChild(iframe);
      grid.appendChild(wrap);
    }
    msg.textContent = `Created ${count} embeds for video id: ${id}.`;
  });

  clearBtn.addEventListener('click', () => {
    grid.innerHTML = '';
    msg.textContent = '';
  });

  urlInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') makeBtn.click(); });
  countInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') makeBtn.click(); });
</script>
</body>
</html>
