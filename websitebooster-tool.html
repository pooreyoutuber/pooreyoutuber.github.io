<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Earning Booster Prime</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 20px; background-color: #f4f7f6; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background-color: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        h1 { color: #007bff; text-align: center; margin-bottom: 25px; }
        .input-group { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .input-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #555; }
        input[type="text"], input[type="number"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; margin-top: 5px; }
        .checkbox-group { margin-top: 15px; }
        .checkbox-group label { margin-right: 20px; font-weight: normal; }
        button { background-color: #28a745; color: white; padding: 12px 20px; border: none; border-radius: 5px; cursor: pointer; width: 100%; font-size: 1.1em; transition: background-color 0.3s; }
        button:hover { background-color: #218838; }
        .status-box { margin-top: 25px; padding: 15px; border-radius: 8px; background-color: #e2f0fb; border-left: 5px solid #007bff; font-weight: bold; display: flex; align-items: center; justify-content: space-between; }
        #status-dot { height: 12px; width: 12px; background-color: red; border-radius: 50%; display: inline-block; margin-left: 10px; animation: none; }
        @keyframes blink-green { 0% { background-color: #28a745; } 50% { background-color: #6cff6c; } 100% { background-color: #28a745; } }
        @keyframes blink-yellow { 0% { background-color: #ffc107; } 50% { background-color: #ffffa0; } 100% { background-color: #ffc107; } }
        #log-area { margin-top: 20px; padding: 10px; background-color: #eee; border: 1px solid #ccc; border-radius: 5px; height: 150px; overflow-y: scroll; font-size: 0.9em; white-space: pre-wrap; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Website Earning Booster Prime ðŸš€</h1>
        <div class="input-group">
            <label for="url-input">Target URL (AdSense/GA4 Website Link):</label>
            <input type="text" id="url-input" placeholder="e.g., https://yourwebsite.com/article" value="">
        </div>
        
        <div class="input-group">
            <label for="ga-id">GA4 Measurement ID (Optional for GA4 data):</label>
            <input type="text" id="ga-id" placeholder="e.g., G-XXXXXXXXXX">
        </div>
        
        <div class="input-group">
            <label for="api-secret">GA4 API Secret (Optional for GA4 data):</label>
            <input type="text" id="api-secret" placeholder="e.g., ABCDEFG_HIJKLMNOP">
        </div>
        
        <div class="input-group">
            <label for="views-input">Views to Send (Max 1000):</label>
            <input type="number" id="views-input" value="100" min="1" max="1000">
        </div>

        <div class="checkbox-group">
            <label>
                <input type="checkbox" id="active-user-mode" checked>
                Enable Active User Mode (45-120s sessions)
            </label>
            <label>
                <input type="checkbox" id="auto-clicker-mode" checked>
                Enable Auto Clicker (Earning Booster - Max CPC)
            </label>
        </div>

        <button onclick="startBoosting()">Start Prime Booster</button>

        <div class="status-box">
            <span id="status-message">Ready to boost.</span>
            <div style="display: flex; align-items: center;">
                Status: <span id="status-dot"></span>
            </div>
        </div>

        <div id="log-area">Log:</div>
    </div>

    <script>
        // =========================================================================
        // ðŸš¨ CRITICAL CONFIGURATION: BACKEND ENDPOINT
        // This is the URL of your deployed Node.js server (index (5).js)
        // Agar aap Render, Replit, ya dusre platform par deploy kar rahe hain, toh URL yahan badlein.
        // Pichle code ke anusaar, Render URL use kiya gaya hai.
        const PROXY_ENDPOINT = "https://pooreyoutuber-github-io-blmp.onrender.com/proxy-request";
        // =========================================================================

        // =========================================================================
        // ðŸ”¥ CRITICAL FIX: REAL PROXIES FROM 'Webshare 10 proxies.txt'
        // Format: { ip: "IP", port: "PORT", auth: "USERNAME:PASSWORD" }
        // =========================================================================
        const PROXIES_LIST = [
            { ip: "142.111.48.253", port: "7030", auth: "bqctypvz:399xb3kxqv6i", country: "US" },
            { ip: "31.59.20.176", port: "6754", auth: "bqctypvz:399xb3kxqv6i", country: "IN" },
            { ip: "23.95.150.145", port: "6114", auth: "bqctypvz:399xb3kxqv6i", country: "US" },
            { ip: "198.23.239.134", port: "6540", auth: "bqctypvz:399xb3kxqv6i", country: "US" },
            { ip: "107.172.163.27", port: "6543", auth: "bqctypvz:399xb3kxqv6i", country: "CA" },
            { ip: "198.105.121.200", port: "6462", auth: "bqctypvz:399xb3kxqv6i", country: "GB" },
            { ip: "64.137.96.74", port: "6641", auth: "bqctypvz:399xb3kxqv6i", country: "US" },
            { ip: "84.247.60.125", port: "6095", auth: "bqctypvz:399xb3kxqv6i", country: "DE" },
            { ip: "216.10.27.159", port: "6837", auth: "bqctypvz:399xb3kxqv6i", country: "US" },
            { ip: "142.111.67.146", port: "5611", auth: "bqctypvz:399xb3kxqv6i", country: "US" }
        ];

        // =========================================================================
        // ðŸ”— NEW: REFERRER URLs FOR BACKLINK SIMULATION (High Earning Source)
        // The backend is now configured to use these.
        // =========================================================================
        const REFERRER_URLS = [
            'https://www.google.com/search?q=best+finance+software+2025',
            'https://www.google.com/search?q=insurance+quotes+online',
            'https://www.facebook.com/trending/tech-tools',
            'https://www.linkedin.com/feed/update/high-cpc-blog/',
            'https://www.reddit.com/r/investing/comments/hot-stock-picks',
            'https://www.bing.com/search?q=high+paying+jobs',
            'https://www.yahoo.com/finance/news/'
        ];


        const viewsInput = document.getElementById('views-input');
        const urlInput = document.getElementById('url-input');
        const gaIdInput = document.getElementById('ga-id');
        const apiSecretInput = document.getElementById('api-secret');
        const autoClickerModeCheckbox = document.getElementById('auto-clicker-mode');
        const statusMessage = document.getElementById('status-message');
        const statusDot = document.getElementById('status-dot');
        const logArea = document.getElementById('log-area');

        let isRunning = false;
        let stopFlag = false;

        function setStatus(message, success) {
            statusMessage.textContent = message;
            statusDot.style.animation = 'none'; // Reset animation
            if (success) {
                statusDot.style.backgroundColor = '#28a745';
                statusDot.style.animation = 'blink-green 1s infinite';
            } else if (message.includes('Waiting')) {
                statusDot.style.backgroundColor = '#ffc107';
                statusDot.style.animation = 'blink-yellow 1s infinite';
            } else {
                statusDot.style.backgroundColor = 'red';
            }
        }

        function log(message) {
            const now = new Date().toLocaleTimeString();
            logArea.textContent = `[${now}] ${message}\n` + logArea.textContent;
        }

        function getOptimalDelay() {
            // Random delay between 45 seconds and 120 seconds (Active User Mode)
            return Math.floor(Math.random() * (120000 - 45000 + 1)) + 45000;
        }

        // ðŸ”¥ MODIFIED FUNCTION: REFERER PARAMETER ADDED
        function getProxiedUrl(originalUrl, proxy, gaId, apiSecret, clickerEnabled, referrerUrl){
            const clickerParam = clickerEnabled ? '1' : '0';
            const ipParam = proxy.ip ? `ip=${proxy.ip}&port=${proxy.port}&` : '';
            const authParam = proxy.auth ? `auth=${proxy.auth}&` : '';
            const gaIdParam = gaId ? `ga_id=${gaId}&` : '';
            const apiSecretParam = apiSecret ? `api_secret=${apiSecret}&` : '';
            
            // Critical: Unique Client ID (UID) based on Proxy
            const uniqueId = btoa(proxy.ip + proxy.auth); 

            return `${PROXY_ENDPOINT}?` + 
                `target=${encodeURIComponent(originalUrl)}&` + 
                ipParam + 
                authParam +
                gaIdParam +
                apiSecretParam +
                `clicker=${clickerParam}&` +
                // CRITICAL: New Referer Parameter Added for Backend
                `referer=${encodeURIComponent(referrerUrl)}&` + 
                `uid=${uniqueId}`; 
        }

        async function runAutomation(originalUrl, gaId, apiSecret, totalViews){
            if(stopFlag) return;
            
            const totalProxies = PROXIES_LIST.length;
            const clickerEnabled = autoClickerModeCheckbox.checked;

            for(let i = 0; i < totalViews; i++) {
                if(stopFlag) break;

                const viewNumber = i + 1;
                
                // 1. Select Proxy and Referrer
                const proxyIndex = i % totalProxies;
                const proxy = PROXIES_LIST[proxyIndex];
                
                const randomRefererIndex = Math.floor(Math.random() * REFERRER_URLS.length);
                const referrerUrl = REFERRER_URLS[randomRefererIndex];
                
                const proxiedUrl = getProxiedUrl(originalUrl, proxy, gaId, apiSecret, clickerEnabled, referrerUrl);
                
                setStatus(`View ${viewNumber}/${totalViews}: Sending Request from ${proxy.country} (Proxy: ${proxy.ip})...`, false);
                log(`[View ${viewNumber}/${totalViews}] Starting session via ${proxy.ip} (Geo: ${proxy.country}). Referer: ${new URL(referrerUrl).hostname}.`);

                try {
                    // Use a simple fetch call to your backend (no-cors mode for cross-origin if needed, but not strictly required if backend handles CORS)
                    const response = await fetch(proxiedUrl);
                    const data = await response.json();

                    if(response.ok) {
                        setStatus(`View ${viewNumber}/${totalViews} SUCCESS! ${data.message}`, true);
                        log(`[View ${viewNumber}/${totalViews} SUCCESS] Status: ${data.message}`);
                    } else {
                        setStatus(`View ${viewNumber}/${totalViews} FAILED. Error: ${data.error || 'Server Error'}`, false);
                        log(`[View ${viewNumber}/${totalViews} FAILED] Error: ${data.error || 'Server Error'}`);
                    }
                } catch (e) {
                    setStatus(`View ${viewNumber}/${totalViews} CRITICAL FAILURE (Network Error) on proxy ${proxy.ip}.`, false);
                    log(`[View ${viewNumber}/${totalViews} CRITICAL FAILURE] Network Error: ${e.message}`);
                }
                
                if (viewNumber < totalViews) {
                    const delay = getOptimalDelay();
                    setStatus(`View ${viewNumber}/${totalViews} Complete. Waiting for ${Math.round(delay/1000)}s for next view...`, false);
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }

            setStatus('All boosting tasks completed! âœ…', true);
            isRunning = false;
            stopFlag = false;
            document.querySelector('button').textContent = "Start Prime Booster";
        }

        function startBoosting() {
            if (isRunning) {
                // Stop the process
                stopFlag = true;
                document.querySelector('button').textContent = "Stopping...";
                setStatus('Stopping tasks. Please wait...', false);
                return;
            }

            const totalViews = parseInt(viewsInput.value);
            const targetUrl = urlInput.value.trim();
            const gaId = gaIdInput.value.trim();
            const apiSecret = apiSecretInput.value.trim();

            if (!targetUrl || totalViews < 1 || totalViews > 1000 || PROXIES_LIST.length === 0) {
                setStatus('Invalid Input or Proxies Missing. Check URL, Views (1-1000), and Proxy List.', false);
                return;
            }

            isRunning = true;
            stopFlag = false;
            document.querySelector('button').textContent = "STOP Boosting (Click to stop)";
            logArea.textContent = 'Log:\n'; // Clear log

            setStatus('Starting Prime Booster... Initializing Proxies and Referrers.', true);
            
            // Start the main loop
            runAutomation(targetUrl, gaId, apiSecret, totalViews);
        }
    </script>
</body>
</html>
