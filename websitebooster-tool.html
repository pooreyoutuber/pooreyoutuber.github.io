<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi Browser for Website</title>
    <style>
        /* Basic Reset and Body Styling */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 0; background-color: #f8f9fa; color: #333; display: flex; flex-direction: column; height: 100vh; }

        /* Header (Tool Name) */
        header { background-color: #007bff; color: white; padding: 15px 20px; text-align: center; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        header h1 { margin: 0; font-size: 1.8em; }

        /* Control Panel - Top Section */
        #top-control-panel { padding: 15px 20px; background-color: #ffffff; border-bottom: 1px solid #dee2e6; display: flex; gap: 15px; align-items: center; justify-content: center; }
        #url-input { padding: 10px; border: 1px solid #ced4da; border-radius: 5px; width: 400px; font-size: 1em; }
        #load-button { padding: 10px 20px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: background-color 0.3s; }
        #load-button:hover { background-color: #218838; }

        /* Main Iframe Container (Grid Layout) */
        #iframe-container { flex-grow: 1; padding: 10px; display: grid; 
            grid-template-columns: repeat(5, 1fr); /* 5 Columns */
            grid-template-rows: repeat(4, minmax(200px, 1fr)); /* 4 Rows, equal height */
            gap: 10px; overflow-y: auto; background-color: #e9ecef; }
        
        /* Iframe Slot Styling */
        .iframe-slot { border: 2px solid #adb5bd; border-radius: 8px; overflow: hidden; position: relative; cursor: pointer; background-color: white; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); transition: transform 0.2s, box-shadow 0.2s; }
        .iframe-slot:hover { border-color: #007bff; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15); }
        .iframe-slot iframe { width: 100%; height: 100%; border: none; display: block; }

        /* Bottom Control Panel (Optional Options) */
        #bottom-options { padding: 10px 20px; background-color: #ffffff; border-top: 1px solid #dee2e6; display: flex; gap: 25px; align-items: center; justify-content: center; }
        .option-label { display: flex; align-items: center; cursor: pointer; font-weight: 500; }
        .option-label input[type="checkbox"] { margin-right: 8px; transform: scale(1.2); }

        /* Focus Mode Styling */
        .focus-mode-active #iframe-container { display: block; overflow: hidden; } /* Grid/Flex हटा दें */
        .focus-mode-active .iframe-slot:not(.focused) { display: none !important; }
        .focused { position: fixed; top: 0; left: 0; width: 100vw !important; height: 100vh !important; z-index: 9999; border: none !important; border-radius: 0 !important; }
    </style>
</head>
<body>

    <header>
        <h1>Multi Browser for Website</h1>
    </header>

    <div id="top-control-panel">
        <input type="text" id="url-input" placeholder="Enter URL (e.g., https://www.example.com)">
        <button id="load-button" onclick="loadURL()">Load All 20 Iframes</button>
    </div>

    <div id="iframe-container">
        </div>

    <div id="bottom-options">
        <label class="option-label">
            <input type="checkbox" id="reload-toggle"> 20s Auto Reload
        </label>
        <label class="option-label">
            <input type="checkbox" id="scroll-toggle"> Auto Scrolling
        </label>
        <label class="option-label">
            <input type="checkbox" id="focus-toggle" onclick="toggleFocusMode()"> Focus Mode (Click Frame)
        </label>
    </div>

    <script>
        const NUM_SLOTS = 20;
        const iframeContainer = document.getElementById('iframe-container');
        const reloadToggle = document.getElementById('reload-toggle');
        const scrollToggle = document.getElementById('scroll-toggle');
        const focusToggle = document.getElementById('focus-toggle');
        let reloadIntervalId = null;
        let scrollIntervalId = null;
        let focusedSlot = null;

        // --- 1. Iframe Generation ---
        function generateIframes() {
            for (let i = 0; i < NUM_SLOTS; i++) {
                const slot = document.createElement('div');
                slot.className = 'iframe-slot';
                slot.id = 'slot-' + i;
                
                const iframe = document.createElement('iframe');
                iframe.setAttribute('loading', 'lazy');
                iframe.setAttribute('data-index', i);
                iframe.src = 'about:blank'; // Start with a blank page

                slot.appendChild(iframe);
                iframeContainer.appendChild(slot);
                
                slot.addEventListener('click', function() {
                    if (focusToggle.checked) {
                        setFocus(slot);
                    }
                });
            }
        }
        generateIframes();

        // --- 2. Load URL Function ---
        function loadURL() {
            let url = document.getElementById('url-input').value.trim();
            if (!url) {
                alert('Please enter a valid URL!');
                return;
            }

            // Ensure protocol is present
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }

            const iframes = iframeContainer.querySelectorAll('iframe');
            iframes.forEach(iframe => {
                iframe.src = url;
            });
        }

        // --- 3. 20s Auto Reload Feature ---
        reloadToggle.addEventListener('change', function() {
            if (this.checked) {
                if (reloadIntervalId) clearInterval(reloadIntervalId);
                
                reloadIntervalId = setInterval(() => {
                    const iframes = iframeContainer.querySelectorAll('iframe');
                    iframes.forEach(iframe => {
                        try {
                            // Tries to reload the iframe content
                            iframe.contentWindow.location.reload(true);
                            console.log(`Iframe ${iframe.getAttribute('data-index')} reloaded.`);
                        } catch (e) {
                            // Fallback if Same-Origin Policy blocks direct reload
                            iframe.src = iframe.src; 
                            console.warn(`Iframe ${iframe.getAttribute('data-index')} reloaded via src reset (Same-Origin Policy likely).`);
                        }
                    });
                }, 20000); // 20 seconds

            } else {
                clearInterval(reloadIntervalId);
                reloadIntervalId = null;
            }
        });

        // --- 4. Auto Scrolling Feature ---
        scrollToggle.addEventListener('change', function() {
            if (this.checked) {
                if (scrollIntervalId) clearInterval(scrollIntervalId);

                // Scroll amount (50px) every 1 second
                scrollIntervalId = setInterval(() => {
                    const iframes = iframeContainer.querySelectorAll('iframe');
                    iframes.forEach(iframe => {
                        try {
                            iframe.contentWindow.scrollBy(0, 50); 
                        } catch (e) {
                            console.warn('Scrolling blocked (Same-Origin Policy).');
                        }
                    });
                }, 1000); 

            } else {
                clearInterval(scrollIntervalId);
                scrollIntervalId = null;
            }
        });

        // --- 5. Focus Mode Functions ---
        function setFocus(slot) {
            // Check if Focus Mode is active
            if (!focusToggle.checked) return;

            // If the same slot is clicked again, unfocus
            if (slot.classList.contains('focused')) {
                slot.classList.remove('focused');
                iframeContainer.classList.remove('focus-mode-active');
                focusedSlot = null;
                // Scroll back to where it was
                document.body.style.overflow = 'auto'; 
            } 
            // Focus the new slot
            else {
                if (focusedSlot) {
                    focusedSlot.classList.remove('focused');
                }
                slot.classList.add('focused');
                iframeContainer.classList.add('focus-mode-active');
                focusedSlot = slot;
                // Prevent body scrolling when focused
                document.body.style.overflow = 'hidden'; 
            }
        }

        function toggleFocusMode() {
            if (!focusToggle.checked && focusedSlot) {
                // If focus is turned OFF, remove existing focus
                focusedSlot.classList.remove('focused');
                iframeContainer.classList.remove('focus-mode-active');
                focusedSlot = null;
                document.body.style.overflow = 'auto';
            }
            if (focusToggle.checked) {
                alert("Focus Mode is ON. Click on any iframe to expand it fully. Click it again to return to grid view.");
            }
        }
        
    </script>
</body>
</html>
