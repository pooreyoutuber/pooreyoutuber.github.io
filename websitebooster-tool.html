<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini-Browser Multi-Viewer</title>
    <style>
        /* General Setup & Global Controls */
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #e9ebee;
            color: #333;
        }
        h1 {
            color: #1c2e4a;
            text-align: center;
            padding: 15px 0;
            background-color: #ffffff;
            margin: 0 0 20px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .global-controls {
            max-width: 90%;
            margin: 0 auto 20px auto;
            background-color: #ffffff;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .options-group {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 1px solid #eee;
            margin-top: 10px;
        }
        .option-item {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 15px;
        }
        .option-item input[type="checkbox"] {
            margin-right: 10px;
            appearance: none;
            width: 18px;
            height: 18px;
            border: 2px solid #007bff;
            border-radius: 3px;
            position: relative;
            cursor: pointer;
        }
        .option-item input[type="checkbox"]:checked {
            background-color: #007bff;
        }
        .option-item input[type="checkbox"]:checked::after {
            content: '‚úì';
            position: absolute;
            top: -2px;
            left: 2px;
            color: white;
            font-size: 14px;
        }

        /* Iframe Grid Styling */
        .iframe-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 15px;
            max-width: 90%;
            margin: 0 auto;
            height: 85vh; 
        }
        .iframe-slot {
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            overflow: hidden; 
        }

        /* Slot Header (Mini-Search Bar) */
        .slot-header {
            display: flex;
            padding: 5px;
            background-color: #f7f7f7;
            border-bottom: 1px solid #eee;
            flex-shrink: 0; /* Prevents header from shrinking */
        }
        .slot-header input {
            flex-grow: 1;
            padding: 5px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 12px;
        }
        .slot-header button {
            padding: 5px 10px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            margin-left: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: background-color 0.3s;
        }
        .slot-header button:hover {
            background-color: #1e7e34;
        }
        
        /* Iframe Container & Scaling */
        .iframe-container {
            flex-grow: 1; /* Allows iframe container to take remaining space */
            position: relative;
            overflow: hidden; /* This hides the scrolled parts of the inner content */
        }
        .iframe-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            /* DESKTOP MODE SIMULATION */
            width: 1280px; 
            height: 100%; 
            border: none;
            
            /* Scaling and Origin for Desktop View */
            transform: scale(0.35); 
            transform-origin: 0 0; 
            min-height: 1000px; 
        }
    </style>
</head>
<body>

    <h1>üåê Mini-Browser Multi-Viewer</h1>

    <div class="global-controls">
        <p style="font-weight: bold; margin-bottom: 5px; color: #1c2e4a;">Global Options:</p>
        <div class="options-group">
            <label class="option-item" for="autoReloadCheckbox">
                <input type="checkbox" id="autoReloadCheckbox">
                Auto Reload All (Every 30s)
            </label>
            <label class="option-item" for="autoScrollCheckbox">
                <input type="checkbox" id="autoScrollCheckbox">
                Auto Scrolling All (30s Cycle, 10 Steps)
            </label>
        </div>
    </div>

    <div class="iframe-grid" id="iframeContainer">
        </div>

    <script>
        const container = document.getElementById('iframeContainer');
        const autoReloadCheckbox = document.getElementById('autoReloadCheckbox');
        const autoScrollCheckbox = document.getElementById('autoScrollCheckbox');
        
        const NUM_SLOTS = 10;
        let reloadInterval = null;
        let scrollInterval = null;
        
        // Array to store the current URL for each slot
        const slotUrls = Array(NUM_SLOTS).fill('about:blank');

        // 1. Initial Setup: Create 10 Mini-Browser Slots
        function initializeSlots() {
            for (let i = 0; i < NUM_SLOTS; i++) {
                const slotDiv = document.createElement('div');
                slotDiv.className = 'iframe-slot';
                slotDiv.id = `slot-${i + 1}`; // Unique ID for each slot

                // Create Header (Mini-Search Bar)
                const header = document.createElement('div');
                header.className = 'slot-header';
                
                const urlInput = document.createElement('input');
                urlInput.type = 'url';
                urlInput.id = `urlInput-${i + 1}`;
                urlInput.placeholder = `URL for Slot ${i + 1}`;
                
                const loadButton = document.createElement('button');
                loadButton.textContent = 'Go';
                loadButton.onclick = () => loadSingleUrl(i + 1);

                header.appendChild(urlInput);
                header.appendChild(loadButton);
                slotDiv.appendChild(header);

                // Create Iframe Container
                const iframeContainer = document.createElement('div');
                iframeContainer.className = 'iframe-container';
                iframeContainer.id = `iframeContainer-${i + 1}`;
                
                const iframe = document.createElement('iframe');
                iframe.id = `iframe-${i + 1}`;
                iframe.src = slotUrls[i]; 
                
                iframeContainer.appendChild(iframe);
                slotDiv.appendChild(iframeContainer);

                container.appendChild(slotDiv);
                
                // Add Enter key listener for the input field
                urlInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        loadSingleUrl(i + 1);
                    }
                });
            }
        }

        // 2. Load URL in a single slot
        function loadSingleUrl(slotIndex) {
            const urlInput = document.getElementById(`urlInput-${slotIndex}`);
            const iframe = document.getElementById(`iframe-${slotIndex}`);
            const url = urlInput.value.trim();

            if (!url) {
                alert(`Please enter a valid URL for Slot ${slotIndex}!`);
                urlInput.focus();
                return;
            }

            // Ensure protocol is present and update stored URL
            const fullUrl = url.startsWith('http') ? url : `https://${url}`;
            slotUrls[slotIndex - 1] = fullUrl;
            
            // Load the URL
            if (iframe) {
                iframe.src = fullUrl;
            }
        }

        // 3. Auto Reload Management (Every 30 seconds)
        function manageAutoReload() {
            if (reloadInterval) {
                clearInterval(reloadInterval);
                reloadInterval = null;
            }

            if (autoReloadCheckbox.checked) {
                reloadInterval = setInterval(() => {
                    for (let i = 1; i <= NUM_SLOTS; i++) {
                        const url = slotUrls[i - 1];
                        if (url && url !== 'about:blank') {
                            const iframe = document.getElementById(`iframe-${i}`);
                            if (iframe) {
                                iframe.src = url; // Reload by setting the same source
                            }
                        }
                    }
                    console.log(`Auto Reloaded ${NUM_SLOTS} slots.`);
                }, 30000); // 30 seconds
            }
        }

        // 4. Auto Scrolling Management (10 steps over 30 seconds)
        function manageAutoScroll() {
            if (scrollInterval) {
                clearInterval(scrollInterval);
                scrollInterval = null;
            }

            if (autoScrollCheckbox.checked) {
                let scrollStep = 0;
                const NUM_STEPS = 10;
                const INTERVAL_MS = 3000; // 3 seconds per step
                const MAX_SCROLL_HEIGHT_ESTIMATE = 1000; // Estimated large scroll area

                scrollInterval = setInterval(() => {
                    scrollStep = (scrollStep % NUM_STEPS) + 1; // Cycle steps 1 to 10

                    for (let i = 1; i <= NUM_SLOTS; i++) {
                        const iframeContainer = document.getElementById(`iframeContainer-${i}`);
                        
                        if (iframeContainer) {
                            const slotHeight = iframeContainer.clientHeight;
                            
                            // Calculate the target scroll position based on the visible height and steps
                            // The scroll distance is based on the visible height to ensure a full pass.
                            const SCROLL_AMOUNT_PER_STEP = (slotHeight * 2) / NUM_STEPS;
                            
                            let targetScrollTop = SCROLL_AMOUNT_PER_STEP * (scrollStep - 1);
                            
                            if (scrollStep === 1) {
                                targetScrollTop = 0; // Ensure reset to top on the first step
                            }
                            
                            // Apply the scroll to the IFRAME CONTAINER DIV
                            iframeContainer.scrollTo({
                                top: targetScrollTop,
                                behavior: 'smooth'
                            });
                        }
                    }
                    console.log(`Scrolling Step: ${scrollStep}`);

                }, INTERVAL_MS); // 3-second interval
            }
        }

        // --- Event Listeners ---
        autoReloadCheckbox.addEventListener('change', manageAutoReload);
        autoScrollCheckbox.addEventListener('change', manageAutoScroll);

        // Initialize the tool
        initializeSlots();
    </script>

</body>
    </html>
    
