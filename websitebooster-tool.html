<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåê ‡§™‡•ç‡§∞‡•â‡§ï‡•ç‡§∏‡•Ä ‡§ú‡§ø‡§Ø‡•ã‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§∏‡•ç‡§™‡•Ç‡§´‡§∞ (‡§ï‡•â‡§≤‡•á‡§ú ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü)</title>
    <style>
        /* CSS for a Clean, Professional Look */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
            color: #333;
        }
        .container {
            max-width: 1000px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }
        h2 {
            text-align: center;
            color: #007bff;
            padding-bottom: 10px;
            margin-bottom: 25px;
            font-size: 24px;
        }
        .input-group {
            display: flex;
            margin-bottom: 20px;
        }
        #urlInput {
            flex-grow: 1;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 6px 0 0 6px;
            font-size: 16px;
        }
        #loadButton {
            padding: 12px 25px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 0 6px 6px 0;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        #loadButton:hover {
            background-color: #218838;
        }
        #loadingIndicator {
            text-align: center;
            color: #ffc107;
            margin-bottom: 15px;
            font-weight: bold;
            display: none; /* Initially hidden */
        }
        #displayFrame {
            width: 100%;
            height: 650px;
            border: 2px solid #007bff;
            border-radius: 8px;
            background-color: #eee;
        }
        .note {
            background-color: #e0f7fa;
            color: #005662;
            padding: 15px;
            border-left: 5px solid #00bcd4;
            border-radius: 6px;
            margin-top: 25px;
            font-size: 14px;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            padding: 15px;
            border: 1px solid #f5c6cb;
            border-radius: 6px;
            margin-top: 15px;
            text-align: center;
            display: none;
        }
    </style>
</head>
<body>

    <div class="container">
        <h2>üåê ‡§™‡•ç‡§∞‡•â‡§ï‡•ç‡§∏‡•Ä ‡§µ‡•ç‡§Ø‡•Ç‡§Ö‡§∞ | ‡§ú‡§ø‡§Ø‡•ã‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§ö‡•á‡§Ç‡§ú‡§∞ (‡§ï‡•â‡§≤‡•á‡§ú ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü)</h2>
        <p>‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø URL (Target URL) ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç ‡§ú‡§ø‡§∏‡•á ‡§Ü‡§™ Webshare Rotating Proxy ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§¶‡•á‡§ñ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç:</p>
        
        <div class="input-group">
            <input type="url" id="urlInput" placeholder="‡§â‡§¶‡§æ‡§π‡§∞‡§£: https://www.google.com/search?q=my+ip+address" value="" required>
            <button id="loadButton" onclick="loadProxiedUrl()">‡§™‡•ç‡§∞‡•â‡§ï‡•ç‡§∏‡•Ä ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</button>
        </div>

        <div id="loadingIndicator">‚è≥ ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§™‡•ç‡§∞‡•â‡§ï‡•ç‡§∏‡•Ä ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...</div>
        <div id="errorDisplay" class="error"></div>

        <iframe id="displayFrame" src="" title="‡§™‡•ç‡§∞‡•â‡§ï‡•ç‡§∏‡•Ä ‡§µ‡•ç‡§Ø‡•Ç‡§Ö‡§∞"></iframe>

        <div class="note">
            **‚öôÔ∏è ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§µ‡§ø‡§µ‡§∞‡§£:** ‡§Ø‡§π ‡§ü‡•Ç‡§≤ ‡§Ü‡§™‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§ø‡§è ‡§ó‡§è URL ‡§ï‡•ã Render ‡§™‡§∞ ‡§°‡§ø‡§™‡•ç‡§≤‡•â‡§Ø ‡§ï‡§ø‡§è ‡§ó‡§è Python Backend ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§™‡§∞ ‡§≠‡•á‡§ú‡§§‡§æ ‡§π‡•à‡•§ Backend ‡§∏‡§∞‡•ç‡§µ‡§∞ **Webshare Rotating Proxy** ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§â‡§∏ URL ‡§ï‡•ã ‡§∞‡§ø‡§ï‡•ç‡§µ‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡§§‡§æ ‡§π‡•à, ‡§ú‡§ø‡§∏‡§∏‡•á ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§ï‡•ã ‡§Ü‡§™‡§ï‡§æ **‡§ú‡§ø‡§Ø‡•ã‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§¨‡§¶‡§≤‡§æ ‡§π‡•Å‡§Ü** ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§
        </div>

    </div>

    <script>
        // ‡§Ü‡§™‡§ï‡§æ Render URL: https://pooreyoutuber-github-io-blmp.onrender.com
        const RENDER_PROXY_URL = 'https://pooreyoutuber-github-io-blmp.onrender.com/proxy'; 
        
        const urlInput = document.getElementById('urlInput');
        const loadButton = document.getElementById('loadButton');
        const displayFrame = document.getElementById('displayFrame');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const errorDisplay = document.getElementById('errorDisplay');

        // URL ‡§ï‡•ã ‡§∏‡§æ‡§´ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§î‡§∞ HTTPS ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à
        function sanitizeUrl(url) {
            let sanitizedUrl = url.trim();
            if (!sanitizedUrl.startsWith('http://') && !sanitizedUrl.startsWith('https://')) {
                sanitizedUrl = 'https://' + sanitizedUrl;
            }
            return sanitizedUrl;
        }

        async function loadProxiedUrl() {
            const targetUrl = sanitizeUrl(urlInput.value);

            if (!targetUrl) {
                alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§µ‡•à‡§ß URL ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§");
                return;
            }

            // UI ‡§ï‡•ã ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§®‡§æ (‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó ‡§∂‡•Å‡§∞‡•Ç)
            loadButton.disabled = true;
            loadingIndicator.style.display = 'block';
            errorDisplay.style.display = 'none';
            displayFrame.src = 'about:blank'; // iFrame ‡§ï‡•ã ‡§∏‡§æ‡§´ ‡§ï‡§∞‡§®‡§æ

            console.log(`Sending request to backend for: ${targetUrl}`);

            try {
                // Backend API ‡§ï‡•ã URL ‡§≠‡•á‡§ú‡§®‡§æ
                const response = await fetch(RENDER_PROXY_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ url: targetUrl })
                });

                const data = await response.json();

                if (response.ok && data.html) {
                    // Backend ‡§∏‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ HTML ‡§ï‡•ã iFrame ‡§Æ‡•á‡§Ç ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡§æ
                    // ‡§Ø‡§π HTML ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á Rendered Content ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã‡§ó‡§æ
                    displayFrame.srcdoc = data.html;
                } else {
                    // Backend ‡§∏‡•á ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§Æ‡§ø‡§≤‡•Ä
                    const errorMessage = data.error || "‡§™‡•ç‡§∞‡•ã‡§ï‡•ç‡§∏‡•Ä ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§Æ‡§ø‡§≤‡•Ä‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ URL ‡§Ø‡§æ Backend ‡§≤‡•â‡§ó‡•ç‡§∏ ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç‡•§";
                    errorDisplay.textContent = '‚ùå ' + errorMessage;
                    errorDisplay.style.display = 'block';
                    displayFrame.srcdoc = '';
                }

            } catch (error) {
                // ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§Ø‡§æ ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø
                console.error('Network Error:', error);
                errorDisplay.textContent = '‚ùå ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: Render ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§§‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤‡•§ ‡§ï‡•ç‡§Ø‡§æ Backend ‡§ö‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à?';
                errorDisplay.style.display = 'block';
            } finally {
                // UI ‡§ï‡•ã ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§®‡§æ (‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§)
                loadButton.disabled = false;
                loadingIndicator.style.display = 'none';
            }
        }
    </script>

</body>
</html>
