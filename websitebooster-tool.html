<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Booster Prime</title>
    <style>
        /* General Styles */
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; }
        
        /* Header and Control Panel */
        #header-panel { background-color: #ffffff; border-bottom: 2px solid #ddd; padding: 15px 20px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); }
        h1 { margin-top: 0; font-size: 1.8em; color: #333; }
        
        /* URL Input Section */
        .url-input-section { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .url-input-section input[type="text"] { flex-grow: 1; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 1em; }
        .url-input-section button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; transition: background-color 0.3s; }
        .url-input-section button:hover { background-color: #0056b3; }
        
        /* Optional Options Section */
        #options-panel { background-color: #e9ecef; padding: 10px 15px; border-radius: 4px; margin-bottom: 20px; display: flex; align-items: center; gap: 20px; font-size: 0.9em; }
        .option-group { display: flex; align-items: center; gap: 5px; }
        
        /* Main Grid Container */
        #iframe-container { display: grid; 
            grid-template-columns: repeat(4, 1fr); /* 4 columns for a cleaner desktop look */
            grid-auto-rows: 350px; /* Fixed height for slots */
            gap: 15px; padding: 20px; }

        /* Iframe Slot Styling */
        .slot { background-color: white; border: 1px solid #ccc; border-radius: 6px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); padding: 10px; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        .slot-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; font-weight: bold; font-size: 0.9em; color: #555; }
        
        /* Control bar within each slot */
        .slot-controls { display: flex; gap: 5px; margin-top: 5px; }
        .slot-controls button { padding: 5px 10px; border: none; border-radius: 3px; cursor: pointer; font-size: 0.8em; }
        .load-btn { background-color: #28a745; color: white; }
        .load-btn:hover { background-color: #1e7e34; }
        
        /* Iframe itself - Desktop View Emulation */
        .iframe-wrapper { flex-grow: 1; border: 1px solid #eee; overflow: hidden; position: relative; }
        .iframe-wrapper iframe { 
            /* Desktop Mode Emulation */
            width: 1000px; /* Emulate desktop width */
            height: 100%; 
            border: none;
            /* Scaling down the content to fit the smaller slot */
            transform: scale(0.35); /* Adjust scale factor based on slot size */
            transform-origin: 0 0; 
            position: absolute;
        }

        /* Focus Mode Styling */
        .focus-mode-active #iframe-container { display: block; padding: 0; } 
        .focus-mode-active .slot:not(.focused) { display: none !important; }
        .focused { position: fixed; top: 0; left: 0; width: 100vw !important; height: 100vh !important; z-index: 9999; border: none !important; border-radius: 0 !important; padding: 0; }
        .focused .iframe-wrapper iframe {
            transform: scale(1.0); /* Remove scaling in focus mode */
            width: 100%; 
            height: 100%;
        }
        .focused .slot-header, .focused .slot-controls, .focused .slot-url-input { display: none; }
    </style>
</head>
<body>

    <div id="header-panel">
        <h1>Website Booster Prime</h1>
        
        <div class="url-input-section">
            <input type="text" id="master-url-input" placeholder="Paste Target URL (e.g., https://yoursite.com)">
            <button onclick="loadMasterURL()">Load & Run All 20 Slots</button>
        </div>

        <div id="options-panel">
            <div class="option-group">
                <input type="checkbox" id="reload-toggle">
                <label for="reload-toggle">Enable Auto Reload every 20 seconds</label>
            </div>
            <div class="option-group">
                <input type="checkbox" id="scroll-toggle">
                <label for="scroll-toggle">Enable Auto Scrolling</label>
            </div>
            <div class="option-group">
                <input type="checkbox" id="focus-toggle" onclick="toggleFocusMode()">
                <label for="focus-toggle">Focus Mode (Click to expand)</label>
            </div>
        </div>
    </div>

    <div id="iframe-container">
        </div>

    <script>
        const NUM_SLOTS = 20;
        const iframeContainer = document.getElementById('iframe-container');
        const reloadToggle = document.getElementById('reload-toggle');
        const scrollToggle = document.getElementById('scroll-toggle');
        const focusToggle = document.getElementById('focus-toggle');
        let reloadIntervalId = null;
        let scrollIntervalId = null;
        let focusedSlot = null;
        
        // --- Utility Function: Clean URL ---
        function cleanURL(url) {
            url = url.trim();
            if (!url.startsWith('http://') && !url.startsWith('https://') && url !== 'about:blank') {
                return 'https://' + url;
            }
            return url;
        }

        // --- 1. Iframe Generation ---
        function generateIframes() {
            for (let i = 0; i < NUM_SLOTS; i++) {
                const slot = document.createElement('div');
                slot.className = 'slot';
                slot.id = 'slot-' + i;

                const slotHeader = document.createElement('div');
                slotHeader.className = 'slot-header';
                slotHeader.textContent = `SLOT ${i + 1}`;
                slot.appendChild(slotHeader);

                const urlInput = document.createElement('input');
                urlInput.type = 'text';
                urlInput.className = 'slot-url-input';
                urlInput.placeholder = 'Manual URL for Slot ' + (i + 1);
                urlInput.value = ''; // Empty initially
                slot.appendChild(urlInput);

                const iframeWrapper = document.createElement('div');
                iframeWrapper.className = 'iframe-wrapper';
                
                const iframe = document.createElement('iframe');
                iframe.src = 'about:blank';
                iframe.setAttribute('data-index', i);
                iframeWrapper.appendChild(iframe);
                slot.appendChild(iframeWrapper);

                const controls = document.createElement('div');
                controls.className = 'slot-controls';
                
                const loadBtn = document.createElement('button');
                loadBtn.className = 'load-btn';
                loadBtn.textContent = 'Load & Run';
                loadBtn.onclick = () => loadSingleURL(iframe, urlInput.value);
                controls.appendChild(loadBtn);
                
                slot.appendChild(controls);

                iframeContainer.appendChild(slot);
                
                // Focus Mode Event Listener
                slot.addEventListener('click', function(e) {
                    // Prevent focus when clicking inside input or buttons
                    if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'BUTTON' && focusToggle.checked) {
                        setFocus(slot);
                    }
                });
            }
        }
        generateIframes();

        // --- 2. Load Functions ---
        
        // Load URL to all slots
        function loadMasterURL() {
            const masterUrl = document.getElementById('master-url-input').value;
            const clean = cleanURL(masterUrl);
            if (!clean) return alert('Please enter a valid URL!');

            const slots = iframeContainer.querySelectorAll('.slot');
            slots.forEach(slot => {
                const iframe = slot.querySelector('iframe');
                const urlInput = slot.querySelector('.slot-url-input');
                
                // Update manual input field
                urlInput.value = clean;
                
                // Load iframe
                loadSingleURL(iframe, clean);
            });
        }
        
        // Load URL to a single slot
        function loadSingleURL(iframeElement, url) {
            const clean = cleanURL(url);
            if (clean) {
                iframeElement.src = clean;
            } else {
                iframeElement.src = 'about:blank';
            }
        }


        // --- 3. 20s Auto Reload Feature (Modified to use master interval) ---
        reloadToggle.addEventListener('change', function() {
            if (this.checked) {
                if (reloadIntervalId) clearInterval(reloadIntervalId);
                
                reloadIntervalId = setInterval(() => {
                    const iframes = iframeContainer.querySelectorAll('iframe');
                    iframes.forEach(iframe => {
                        try {
                            iframe.contentWindow.location.reload(true);
                        } catch (e) {
                            // Fallback for Same-Origin Policy
                            iframe.src = iframe.src; 
                        }
                    });
                    console.log(`Auto Reload triggered for 20 slots.`);
                }, 20000); // 20 seconds

            } else {
                clearInterval(reloadIntervalId);
                reloadIntervalId = null;
            }
        });

        // --- 4. Auto Scrolling Feature ---
        scrollToggle.addEventListener('change', function()
                                      
