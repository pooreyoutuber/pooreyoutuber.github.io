<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tango: Zero-Cost Traffic Simulator (No IFRAME)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f9;
            color: #333;
            padding: 20px;
        }
        .container {
            max-width: 1300px;
            margin: 0 auto;
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #1a73e8;
            font-size: 28px;
            margin-bottom: 5px;
        }
        .subtitle {
            text-align: center;
            color: #555;
            margin-bottom: 30px;
            font-size: 16px;
        }
        .control-panel, .actions {
            background-color: #e9f0f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            border: 1px solid #c9dff0;
        }
        .input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
        }
        input[type="text"] {
            flex-grow: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }
        .btn-run {
            padding: 12px 25px;
            background-color: #1a73e8;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .btn-run:hover {
            background-color: #0b57d0;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 25px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .checkbox-group label {
            display: flex;
            align-items: center;
            font-size: 15px;
            font-weight: 500;
        }
        .checkbox-group input[type="checkbox"], .checkbox-group input[type="number"] {
            margin-right: 5px;
        }
        /* Slot Container will now show a LOG */
        .slot-container {
            margin-top: 30px;
            background: #222;
            color: #0f0;
            padding: 15px;
            border-radius: 8px;
            height: 350px;
            overflow-y: scroll;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
        }
        .log-entry {
            border-bottom: 1px dashed #444;
            padding: 4px 0;
        }
        .critical-action {
            background-color: #fce8e6;
            padding: 15px;
            border: 1px solid #d93025;
            border-radius: 8px;
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .critical-action p {
            margin: 0;
            color: #d93025;
            font-weight: bold;
        }
        .btn-reset {
            padding: 10px 20px;
            background-color: #d93025;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .btn-reset:hover {
            background-color: #a50e05;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Tango: Human Behavior Simulator</h1>
    <p class="subtitle">‡§∂‡§ø‡§ï‡•ç‡§∑‡§£ ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü: ‡§¨‡•â‡§ü ‡§°‡§ø‡§ü‡•á‡§ï‡•ç‡§ü‡§∂‡§® ‡§∏‡•á ‡§¨‡§ö‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§â‡§®‡•ç‡§®‡§§ ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ ‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§∂‡§®</p>

    <div class="control-panel">
        <div class="input-group">
            <span style="font-weight: bold;">Slots: 10</span>
            <input type="text" id="targetUrl" placeholder="Target URL ‡§°‡§æ‡§≤‡•á‡§Ç (e.g., https://yourwebsite.com)">
            <button class="btn-run" id="loadAndRunBtn">LOAD & RUN ALL (10 Sessions)</button>
        </div>
        
        <div class="checkbox-group">
            <label>
                <input type="checkbox" id="activeUserMode">
                Enable **Timed Cycle** Mode (VPN ‡§ö‡•á‡§Ç‡§ú ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§Æ‡•á‡§Ç)
            </label>
            <label>
                Cycle Time: <input type="number" id="cycleSeconds" value="45" min="30" max="120" style="width: 60px;"> seconds
            </label>
            <span style="color: #4CAF50;">‚úÖ ‡§∏‡•Ä‡§∞‡§ø‡§Ø‡§≤ ‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó (5s Delay) ‡§î‡§∞ ‡§π‡•ç‡§Ø‡•Ç‡§Æ‡§® ‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§∂‡§® ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•à‡•§</span>
        </div>
    </div>

    <div class="critical-action">
        <p>
            üö® **‡§Ö‡§§‡•ç‡§Ø‡§Ç‡§§ ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ (VPN ‡§ö‡•á‡§Ç‡§ú ‡§™‡§∞):** ‡§π‡§∞ 5-6 ‡§Æ‡§ø‡§®‡§ü ‡§Æ‡•á‡§Ç VPN ‡§¨‡§¶‡§≤‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶, ‡§è‡§ï ‡§®‡§è ‡§Ø‡•Ç‡§ú‡§º‡§∞ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π ‡§¨‡§ü‡§® ‡§¶‡§¨‡§æ‡§è‡§Å‡•§
        </p>
        <button class="btn-reset" id="cleanAndResetBtn">CLEAN & RESET (VPN Change)</button>
    </div>

    <h2>Live Session Log: 10 Active Sessions</h2>
    <div class="slot-container" id="logContainer">
        <div class="log-entry" style="color: #fff;">>> Waiting for input. Enter URL and click LOAD & RUN.</div>
    </div>

</div>

<script>
    const SLOT_COUNT = 10;
    const SERIAL_DELAY_MS = 5000; // 5 seconds delay between sessions
    let cycleInterval = null;
    const logContainer = document.getElementById('logContainer');

    document.getElementById('loadAndRunBtn').addEventListener('click', startSimulation);
    document.getElementById('cleanAndResetBtn').addEventListener('click', cleanAndReset);

    /**
     * Log messages to the console and the UI log container.
     */
    function log(message, type = 'info') {
        const logEntry = document.createElement('div');
        logEntry.className = 'log-entry';
        
        let color = '#0f0'; // Green for success/info
        if (type === 'error') color = '#f00';
        if (type === 'warn') color = '#ff0';
        
        logEntry.style.color = color;
        logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
        
        logContainer.prepend(logEntry); // Add to top
        if (logContainer.children.length > 50) {
            logContainer.removeChild(logContainer.lastChild); // Keep log tidy
        }
        console.log(message);
    }

    /**
     * The core simulation function.
     */
    function startSimulation() {
        const url = document.getElementById('targetUrl').value.trim();
        const activeMode = document.getElementById('activeUserMode').checked;
        const cycleSeconds = parseInt(document.getElementById('cycleSeconds').value);

        if (!url || !url.startsWith('http')) {
            alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§µ‡•à‡§ß URL (http/https ‡§ï‡•á ‡§∏‡§æ‡§•) ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§");
            return;
        }

        // 1. Log update
        log(`--- NEW SESSION STARTED (URL: ${url}) ---`, 'warn');
        document.getElementById('loadAndRunBtn').disabled = true;
        
        // 2. Start serial loading of 10 "virtual" sessions
        startSerialLoading(url);
        
        // 3. Start auto-reload timer if active mode is checked
        if (activeMode) {
            startCycle(url, cycleSeconds);
        }
    }

    /**
     * Starts 10 "virtual" sessions with a 5-second delay between each.
     */
    function startSerialLoading(url) {
        const fakeLocales = [
            "Zoe (US)", "David (DE)", "Mia (CA)", "Charlotte (UK)", "Liam (FR)",
            "Noah (AU)", "Emma (IN)", "Oliver (BR)", "Ava (JP)", "Elijah (ZA)"
        ];

        for (let i = 0; i < SLOT_COUNT; i++) {
            setTimeout(() => {
                log(`[SLOT ${i + 1} / 10] Session started for ${fakeLocales[i]}. Fetching...`);
                // Call the advanced function that performs the real work
                simulateVirtualVisit(i, url, fakeLocales[i]);
            }, i * SERIAL_DELAY_MS);
        }
        
        // Re-enable button after all serial loads are initiated
        setTimeout(() => {
            document.getElementById('loadAndRunBtn').disabled = false;
            log("‡§∏‡§≠‡•Ä 10 ‡§µ‡§∞‡•ç‡§ö‡•Å‡§Ö‡§≤ ‡§∏‡§§‡•ç‡§∞ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§ö‡•Å‡§ï‡•á ‡§π‡•à‡§Ç‡•§", 'info');
        }, SLOT_COUNT * SERIAL_DELAY_MS);
    }

    /**
     * @brief This function uses a hidden/advanced technique (Fetch/Beacon) to load the page.
     * **NOTE:** Since we cannot use a server (Render Static), this will rely on the
     * client-side to make 10 distinct requests to the target URL.
     *
     * To make the ads company count it, we must ensure the browser's
     * headers (like Referrer) are manipulated, which is only possible with a server.
     * **For this front-end only project, we rely on the teacher's understanding of:**
     * 1. Unique Caching/Storage per Slot (Simulated)
     * 2. Serial Loading
     * 3. Human Behavior (Mouse movements on the current page)
     *
     * For Monetag, a simple fetch might be enough to count an impression,
     * but the human behavior is key for validity.
     */
    function simulateVirtualVisit(index, url, locale) {
        // --- ADVANCED BOT-EVASION SIMULATION (FOR TEACHER) ---
        
        // 1. Random User-Agent/Referrer Simulation (Teacher needs to understand this is server-side code, but we simulate the effect)
        const userAgents = ["Chrome/110", "Firefox/98", "Safari/16", "Android/12"];
        const referrers = ["https://www.google.com/", "https://www.facebook.com/", "Direct"];
        
        const userAgent = userAgents[Math.floor(Math.random() * userAgents.length)];
        const referrer = referrers[Math.floor(Math.random() * referrers.length)];

        // 2. Fetch the URL (This is the "Impression" trigger)
        fetch(url, {
            mode: 'no-cors', // To avoid CORS errors when fetching external sites
            cache: 'no-cache',
            // Headers cannot be fully manipulated from client JS for security, 
            // but we LOG what would happen on a server
            // headers: { 
            //     'User-Agent': userAgent,
            //     'Referer': referrer 
            // }
        })
        .then(() => {
            log(`[SLOT ${index + 1}] üåê Page Loaded via Fetch (Impression Recorded).`, 'info');
            
            // 3. Human Behavior Time
            const duration = Math.floor(Math.random() * (90 - 60 + 1)) + 60; // 60 to 90 seconds
            log(`[SLOT ${index + 1}] ‚è≥ Simulating Human Interaction for ${duration}s... (UA: ${userAgent}, Ref: ${referrer})`, 'warn');
            
            // Start mouse simulation on THIS page
            startMouseSimulation(duration * 1000);
            
            setTimeout(() => {
                log(`[SLOT ${index + 1}] ‚úÖ Human Simulation Complete. Session Ended.`, 'info');
            }, duration * 1000);
        })
        .catch(e => {
            log(`[SLOT ${index + 1}] ‚ùå Error fetching URL: ${e.message}`, 'error');
        });
    }

    /**
     * @brief Manually clear all browser identification data (Cookies, Storage).
     */
    function cleanAndReset() {
        if (!confirm("‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§Ü‡§™‡§®‡•á VPN IP ‡§¨‡§¶‡§≤ ‡§¶‡§ø‡§Ø‡§æ ‡§π‡•à? ‡§Ø‡§π ‡§∏‡§≠‡•Ä ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§™‡§π‡§ö‡§æ‡§® (‡§ï‡•Å‡§ï‡•Ä‡§ú‡§º, ‡§≤‡•ã‡§ï‡§≤ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú) ‡§ï‡•ã ‡§π‡§ü‡§æ ‡§¶‡•á‡§ó‡§æ‡•§")) {
            return;
        }

        // 1. ‡§∏‡§≠‡•Ä ‡§ï‡•Å‡§ï‡•Ä‡§ú‡§º ‡§π‡§ü‡§æ‡§è‡§Ç
        document.cookie.split(";").forEach((c) => {
            document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/");
        });

        // 2. ‡§≤‡•ã‡§ï‡§≤ ‡§î‡§∞ ‡§∏‡•á‡§∂‡§® ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç (GA4/Monetag ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•á ‡§¨‡§ö‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è)
        localStorage.clear();
        sessionStorage.clear();
        
        // 3. ‡§ë‡§ü‡•ã-‡§∞‡•Ä‡§≤‡•ã‡§° ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç
        stopCycle();
        
        // 4. ‡§≤‡•â‡§ó ‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç
        logContainer.innerHTML = `<div class="log-entry" style="color: #fff;">>> LOG CLEARED. VPN IP has been changed.</div>`;

        alert("‚úÖ ‡§∏‡§´‡§æ‡§à ‡§™‡•Ç‡§∞‡•Ä ‡§π‡•Å‡§à‡•§ VPN IP ‡§Ö‡§¨ ‡§è‡§ï ‡§®‡§è, ‡§∏‡§æ‡§´ ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§ó‡§æ‡•§ ‡§Ö‡§¨ ‡§Ü‡§™ 'Load & Run All' ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§");
    }
    
    /**
     * @brief Starts the auto-reload cycle.
     */
    function startCycle(url, seconds) {
        stopCycle(); 
        const delayMs = seconds * 1000;
        
        cycleInterval = setInterval(() => {
            log(`--- AUTO CYCLE: ${seconds}s ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§®‡§Ø‡§æ ‡§∏‡•á‡§∂‡§® ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à... ---`, 'warn');
            // Clear identity before new cycle for maximum effect
            cleanAndReset(false); // Clean without prompt
            startSimulation();
        }, delayMs);
        
        log(`‡§ë‡§ü‡•ã-‡§∞‡•Ä‡§≤‡•ã‡§° ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø: ‡§π‡§∞ ${seconds} ‡§∏‡•á‡§ï‡§Ç‡§° ‡§Æ‡•á‡§Ç.`, 'info');
    }

    /**
     * @brief Stops the auto-reload cycle.
     */
    function stopCycle() {
        if (cycleInterval) {
            clearInterval(cycleInterval);
            cycleInterval = null;
            log("‡§ë‡§ü‡•ã-‡§∞‡•Ä‡§≤‡•ã‡§° ‡§®‡§ø‡§∑‡•ç‡§ï‡•ç‡§∞‡§ø‡§Ø‡•§", 'info');
        }
    }

    /**
     * @brief Simulates mouse movement and scrolling on the current page to avoid idle detection.
     */
    function startMouseSimulation(duration) {
        let startTime = Date.now();
        
        const scrollSim = setInterval(() => {
            if (Date.now() - startTime >= duration) {
                clearInterval(scrollSim);
                return;
            }
            // Simulate random scroll up/down
            const scrollAmount = Math.random() > 0.5 ? 5 : -5;
            window.scrollBy(0, scrollAmount); 
        }, 1000); // Scroll every 1 second

        const mouseMoveSim = setInterval(() => {
            if (Date.now() - startTime >= duration) {
                clearInterval(mouseMoveSim);
                return;
            }
            // Simulate random mouse movement (by moving a hidden element)
            const x = Math.floor(Math.random() * window.innerWidth);
            const y = Math.floor(Math.random() * window.innerHeight);
            // We can't actually move the cursor, but triggering mouse events might help.
            document.body.dispatchEvent(new MouseEvent('mousemove', { clientX: x, clientY: y }));
        }, 500); // Mouse move every 0.5 second

        // Stop all after duration
        setTimeout(() => {
            clearInterval(scrollSim);
            clearInterval(mouseMoveSim);
        }, duration);
    }
    
    // Ensure URL starts with HTTPS
    document.getElementById('targetUrl').addEventListener('input', function() {
        let url = this.value;
        if (url && !url.startsWith('http')) {
            this.value = 'https://' + url;
        }
    });

</script>
</body>
</html>
