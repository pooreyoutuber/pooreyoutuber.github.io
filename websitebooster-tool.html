<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMM AUTOPILOT COCKPIT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { background: #020617; color: #f1f5f9; font-family: sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; margin: 0; }
        .glass { background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(10px); border: 1px solid #1e293b; }
        
        /* UPAR BADI WINDOW */
        .top-window { flex: 2; position: relative; background: #000; border-bottom: 4px solid #1e293b; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        #streamImg { height: 100%; width: auto; max-width: 100%; object-fit: contain; }
        
        /* NEECHE KA PANEL */
        .bottom-panel { flex: 1; display: flex; gap: 15px; padding: 15px; background: #0f172a; }
        
        .logs-section { flex: 1.5; display: flex; flex-direction: column; gap: 5px; }
        .terminal { flex: 1; background: #000; border: 1px solid #1e293b; border-radius: 12px; padding: 10px; font-family: monospace; font-size: 11px; color: #4ade80; overflow-y: auto; }
        
        .controls-section { flex: 1; display: flex; flex-direction: column; gap: 10px; justify-content: center; }
        
        input { background: #1e293b; border: 1px solid #334155; padding: 12px; border-radius: 8px; font-size: 13px; color: white; outline: none; width: 100%; }
        input:focus { border-color: #3b82f6; }
        button { font-weight: bold; border-radius: 8px; transition: 0.3s; width: 100%; cursor: pointer; border: none; }
        
        .live-tag { position: absolute; top: 15px; left: 15px; background: #ef4444; color: white; padding: 4px 12px; border-radius: 4px; font-size: 10px; font-weight: bold; z-index: 10; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>

    <div class="top-window">
        <div class="live-tag">LIVE FEED</div>
        <img id="streamImg" src="https://via.placeholder.com/1280x720?text=WAITING+FOR+LAUNCH+COMMAND..." alt="Live Feed">
    </div>

    <div class="bottom-panel glass">
        
        <div class="logs-section">
            <div class="text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1">Mission Terminal</div>
            <div class="terminal" id="logs">
                <div class="text-blue-400 font-bold">> Cockpit Initialized. Ready for Pilot.</div>
            </div>
        </div>

        <div class="controls-section">
            <button onclick="launchEngine()" id="lchBtn" class="bg-blue-600 hover:bg-blue-500 text-white py-3 mb-2">
                <i class="fa-solid fa-power-off mr-2"></i> LAUNCH ENGINE
            </button>
            
            <input type="text" id="cUrl" placeholder="YouTube Link (Channel/Video)">
            
            <div class="flex gap-2">
                <input type="number" id="vQty" placeholder="Total Views">
                <input type="number" id="tTime" placeholder="Timing (Sec)">
            </div>

            <button onclick="startMission()" id="msnBtn" class="bg-slate-800 text-slate-500 py-3" disabled>
                SUBMIT AUTOMATION ✈️
            </button>
        </div>

    </div>

    <script>
        // AAPKA RENDER URL
        const RENDER_URL = "https://pooreyoutuber-github-ioproxy.onrender.com";
        const stream = document.getElementById('streamImg');
        const logBox = document.getElementById('logs');

        function addLog(msg, color="text-slate-400") {
            const div = document.createElement('div');
            div.className = color;
            div.innerHTML = `> [${new Date().toLocaleTimeString()}] ${msg}`;
            logBox.appendChild(div);
            logBox.scrollTop = logBox.scrollHeight;
        }

        async function launchEngine() {
            addLog("Sending Launch Command to: " + RENDER_URL, "text-yellow-500");
            document.getElementById('lchBtn').innerText = "POWERING UP...";
            
            try {
                const res = await fetch(`${RENDER_URL}/api/init-engine`);
                const data = await res.json();
                
                if(data.status) {
                    addLog("Engine Online! Feed Syncing...", "text-green-400");
                    document.getElementById('lchBtn').innerText = "ENGINE READY ✅";
                    document.getElementById('lchBtn').disabled = true;
                    document.getElementById('lchBtn').classList.add('opacity-50');
                    
                    document.getElementById('msnBtn').disabled = false;
                    document.getElementById('msnBtn').className = "bg-orange-600 hover:bg-orange-500 text-white py-3";
                    
                    // Har 1 sec me screenshot lena
                    setInterval(() => {
                        stream.src = `${RENDER_URL}/live-check?t=` + new Date().getTime();
                    }, 1000);
                }
            } catch (e) {
                addLog("CRITICAL ERROR: Server not reachable!", "text-red-500");
                document.getElementById('lchBtn').innerText = "RETRY LAUNCH";
            }
        }

        async function startMission() {
            const url = document.getElementById('cUrl').value;
            const views = document.getElementById('vQty').value;
            const time = document.getElementById('tTime').value;

            if(!url || !views || !time) return alert("Bhai, Details to bharo!");

            addLog("Data Sent to Server. Autopilot taking over control.", "text-orange-400");
            document.getElementById('msnBtn').innerText = "FLYING... ✈️";
            document.getElementById('msnBtn').disabled = true;

            await fetch(`${RENDER_URL}/api/channel-grow-boost`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    channel_url: url,
                    views_count: parseInt(views),
                    watch_time: parseInt(time)
                })
            });
            addLog("Status: MISSION IN PROGRESS. You can close this window.", "text-blue-300");
        }
    </script>
</body>
</html>
