<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mining For Students - Crypto Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar for a cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; /* Dark background */
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; /* Gray thumb */
            border-radius: 10px;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen p-4 md:p-8 font-sans">

    <header class="text-center mb-10">
        <h1 class="text-4xl md:text-5xl font-extrabold text-teal-400 tracking-wider flex items-center justify-center">
            <span class="mr-3">‚õèÔ∏è</span> Mining For Students 
        </h1>
        <p class="mt-2 text-gray-400 text-lg">Your Multi-Algorithm PoW Controller</p>
    </header>

    <main class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8">
        
        <div class="lg:col-span-2 bg-gray-800 p-6 rounded-xl shadow-2xl border border-gray-700">
            <h2 class="text-2xl font-bold mb-6 text-teal-300 border-b border-gray-700 pb-3">‚öôÔ∏è Mining Setup</h2>
            
            <form id="miningForm" class="space-y-6">

                <div>
                    <label for="coinSelect" class="block text-sm font-medium text-gray-400 mb-2">Select Coin (5 Options)</label>
                    <select id="coinSelect" name="coinSelect" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-teal-500 focus:border-teal-500 text-white" required>
                        <option value="" disabled selected>--- Choose Your Coin ---</option>
                        <option value="XMR">Monero (XMR) - RandomX</option>
                        <option value="ETC">Ethereum Classic (ETC) - Ethash</option>
                        <option value="RVN">Ravencoin (RVN) - KawPow</option>
                        <option value="ZEC">Zcash (ZEC) - Equihash</option>
                        <option value="VRSC">VerusCoin (VRSC) - VerusHash</option>
                    </select>
                </div>

                <div>
                    <label for="walletAddress" class="block text-sm font-medium text-gray-400 mb-2">Wallet Address (Trust Wallet/Binance)</label>
                    <input type="text" id="walletAddress" name="walletAddress" placeholder="Paste your selected coin's receiving address here..." class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-teal-500 focus:border-teal-500 text-white" required>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="miningSpeed" class="block text-sm font-medium text-gray-400 mb-2">Mining Speed Profile</label>
                        <select id="miningSpeed" name="miningSpeed" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-teal-500 focus:border-teal-500 text-white">
                            <option value="low_cpu">Low CPU (Mobile/Older PC)</option>
                            <option value="medium_gpu">Medium GPU (Student Laptop)</option>
                            <option value="high_gpu">High GPU (Dedicated Worker)</option>
                        </select>
                    </div>

                    <div>
                        <label for="targetEarning" class="block text-sm font-medium text-gray-400 mb-2">Target Earning ($ USD)</label>
                        <input type="number" id="targetEarning" name="targetEarning" value="1.00" min="0.50" step="0.50" placeholder="e.g. 1.00" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-teal-500 focus:border-teal-500 text-white" required>
                    </div>
                </div>

                <div class="pt-4">
                    <button type="submit" id="startButton" class="w-full bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 rounded-lg text-lg transition duration-200 shadow-md">
                        ‚ñ∂ START MINING (Connect to Render Backend)
                    </button>
                    <button type="button" id="stopButton" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg text-lg mt-3 transition duration-200 shadow-md hidden">
                        ‚ñ† STOP MINING
                    </button>
                </div>
            </form>
        </div>

        <div class="space-y-8">
            <div class="bg-gray-800 p-6 rounded-xl shadow-2xl border border-gray-700">
                <h2 class="text-2xl font-bold mb-4 text-orange-400">üìä Status Dashboard</h2>
                <div class="space-y-4">
                    <div class="flex justify-between border-b border-gray-700 pb-2">
                        <span class="text-gray-400">Backend URL:</span>
                        <span id="backendUrlDisplay" class="font-semibold text-xs text-teal-400 truncate">https://pooreyoutuber-github-io-blmp.onrender.com</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-700 pb-2">
                        <span class="text-gray-400">Live Hash Rate:</span>
                        <span id="liveHashRate" class="font-semibold text-xl text-yellow-500">0 H/s</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-700 pb-2">
                        <span class="text-gray-400">Unpaid Balance (USD):</span>
                        <span id="unpaidBalance" class="font-semibold text-green-500 text-2xl">$0.00</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-400">Est. Time to Target:</span>
                        <span id="estTime" class="font-semibold text-gray-300">N/A</span>
                    </div>
                </div>
            </div>
            <div class="bg-gray-800 p-6 rounded-xl shadow-2xl border border-gray-700">
                <h2 class="text-2xl font-bold mb-4 text-purple-400">üß† Gemini AI Optimizer</h2>
                <p class="text-sm text-gray-400 mb-4">Get a Profitability Report and Configuration Tips.</p>
                <button id="aiReportButton" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-lg text-lg transition duration-200">
                    Generate AI Report
                </button>
                <div id="aiOutput" class="mt-4 text-sm bg-gray-700 p-3 rounded-lg text-gray-200 hidden">
                    <p class="font-mono text-xs text-purple-300">Waiting for data...</p>
                </div>
            </div>
            
            <div class="bg-gray-800 p-6 rounded-xl shadow-2xl border border-gray-700">
                <h2 class="text-2xl font-bold mb-4 text-blue-400">‚úÖ Wallet Proof (Payout History)</h2>
                <p class="text-sm text-gray-400 mb-4">Demonstrate real, completed transfers to your wallet.</p>
                <button id="showPayouts" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg text-lg transition duration-200">
                    Show Last 5 Successful Payouts
                </button>
            </div>
        </div>
    </main>

    <script>
        // --- 1. Render Backend URL ---
        const RENDER_BACKEND_URL = 'https://pooreyoutuber-github-io-blmp.onrender.com';

        // --- 2. START MINING Logic (Sends Data to Render) ---
        document.getElementById('miningForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const coin = document.getElementById('coinSelect').value;
            const target = document.getElementById('targetEarning').value;
            const speed = document.getElementById('miningSpeed').value;
            const wallet = document.getElementById('walletAddress').value;

            if (!coin || !wallet) {
                alert('Please select a coin and enter a wallet address.');
                return;
            }

            // Prepare data to send to the Render backend
            const payload = {
                action: 'start',
                coin: coin,
                target: parseFloat(target),
                speed_profile: speed,
                wallet_address: wallet
            };

            try {
                // Send POST request to your Render endpoint (assuming the endpoint is /api/start-mining)
                const response = await fetch(`${RENDER_BACKEND_URL}/api/start-mining`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (response.ok) {
                    alert(`Success! Backend started mining for ${coin}. Process ID: ${result.processId || 'N/A'}`);
                    document.getElementById('startButton').classList.add('hidden');
                    document.getElementById('stopButton').classList.remove('hidden');
                    // Update status with live data from the backend response
                    document.getElementById('liveHashRate').textContent = `${result.initialHashRate || 'Starting'} H/s`;
                    document.getElementById('estTime').textContent = result.estimatedTime || 'Calculating...';
                } else {
                    alert(`Backend Error: ${result.message || 'Could not start mining process on Render.'}`);
                }

            } catch (error) {
                console.error('Fetch Error:', error);
                alert('Connection Error: Could not reach the Render Backend URL. Check console for details.');
            }
        });

        // --- 3. STOP MINING Logic ---
        document.getElementById('stopButton').addEventListener('click', async function() {
            // Send a request to the backend to stop the process
            try {
                const response = await fetch(`${RENDER_BACKEND_URL}/api/stop-mining`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    // You might need to send a unique ID here to tell the backend which process to stop
                    body: JSON.stringify({ action: 'stop' }) 
                });

                const result = await response.json();
                
                if (response.ok) {
                    alert('Mining process successfully stopped on the Backend!');
                    document.getElementById('startButton').classList.remove('hidden');
                    document.getElementById('stopButton').classList.add('hidden');
                    document.getElementById('liveHashRate').textContent = '0 H/s (Stopped)';
                } else {
                    alert(`Stop Error: ${result.message || 'Could not stop mining process.'}`);
                }

            } catch (error) {
                console.error('Fetch Error:', error);
                alert('Connection Error: Could not reach the Render Backend URL to stop mining.');
            }
        });
        
        // --- 4. Gemini AI Report Logic (Placeholder) ---
        document.getElementById('aiReportButton').addEventListener('click', function() {
            const output = document.getElementById('aiOutput');
            output.classList.remove('hidden');
            output.innerHTML = '<p class="font-mono text-xs text-purple-300">Requesting real-time configuration analysis from Gemini (via Backend)...</p>';
            
            // This is where a separate fetch call to RENDER_BACKEND_URL/api/gemini-report would go
            // Simulated Response:
            setTimeout(() => {
                output.innerHTML = `
                    <p class="text-green-300 font-bold">GEMINI REPORT SUCCESS:</p>
                    <p>Coin: ${document.getElementById('coinSelect').value || 'N/A'}. Profitability: MEDIUM.</p>
                    <p>Recommendation: Use XMRig with the '--cpu-max-threads-hint=75' flag for 5% efficiency boost.</p>
                `;
            }, 2000);
        });
    </script>
</body>
</html>
