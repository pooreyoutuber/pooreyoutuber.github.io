<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Instagram Viral Caption & Hashtag Generator</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 30px auto; 
            max-width: 700px; 
            background: #f0f2f5; 
            padding: 20px; 
        }
        h1 { 
            text-align: center; 
            color: #1e50b3; /* YouTube Red ‡§ï‡•ã Insta Blue ‡§ú‡•à‡§∏‡§æ ‡§≤‡•Å‡§ï ‡§¶‡§ø‡§Ø‡§æ */
            font-size: 28px;
            margin-bottom: 30px;
        }
        /* ‡§á‡§®‡§™‡•Å‡§ü ‡§î‡§∞ ‡§¨‡§ü‡§® ‡§ï‡§æ ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞ */
        .input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        input[type="text"] { 
            flex-grow: 1; /* ‡§á‡§®‡§™‡•Å‡§ü ‡§ï‡•ã ‡§ú‡§º‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§ú‡§ó‡§π ‡§¶‡•á‡§Ç */
            padding: 12px; 
            border-radius: 8px; 
            border: 1px solid #ccc; 
            font-size: 16px;
        }
        button#generateBtn { 
            padding: 12px 20px; 
            background: #e62117; /* Insta Blue ‡§ï‡•Ä ‡§ú‡§ó‡§π, ‡§è‡§ï ‡§Ü‡§ï‡§∞‡•ç‡§∑‡§ï ‡§∞‡§Ç‡§ó */
            color: white; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: bold;
            transition: background 0.3s;
        }
        button#generateBtn:hover { 
            background: #c21c13; 
        }
        .error { color: red; text-align: center; margin-top: 10px; font-weight: bold; }
        
        /* ‡§ú‡§®‡§∞‡•á‡§ü‡•á‡§° ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤ */
        #contentContainer {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        .success-message {
            color: #1aae6f; /* Success Green */
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .success-message::before {
            content: '‚úì';
            font-size: 20px;
            margin-right: 8px;
            color: white;
            background: #1aae6f;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* ‡§ë‡§™‡•ç‡§∂‡§® ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤ */
        .option {
            border: 1px solid #eee;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 8px;
        }
        .option h2 {
            color: #e62117; /* Option Heading Color */
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 20px;
            border-bottom: 2px solid #eee;
            padding-bottom: 5px;
        }
        .caption-text, .tags-text {
            border: 1px solid #ddd;
            padding: 15px;
            margin-top: 10px;
            border-radius: 6px;
            background: #f9f9f9;
            white-space: pre-wrap; /* ‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü‡§ø‡§Ç‡§ó ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è */
            word-wrap: break-word;
            font-size: 14px;
        }
        .tags-text {
            color: #1e50b3; /* Hashtag color */
            font-weight: 500;
        }

        .copy-btn {
            background: #1e50b3;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 15px;
            font-weight: bold;
            transition: background 0.3s;
        }
        .copy-btn:hover {
            background: #17458f;
        }
        .label {
            font-weight: bold;
            color: #333;
            display: block;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>üî• Instagram Viral Caption & Hashtag Generator</h1>
    <div class="input-container">
        <input id="titleInput" type="text" placeholder="Enter video/photo topic (e.g., PUBG Mobile Headshots)" />
        <button id="generateBtn">Generate SEO Content</button>
    </div>
    
    <div class="error" id="errorMsg"></div>
    
    <div id="contentContainer" style="display: none;">
        <div class="success-message">Generated Content Options</div>
        <ul id="optionsList">
            </ul>
    </div>

    <script>
        const API_ENDPOINT = 'https://pooreyoutuber-github-io.onrender.com/generate-captions'; // ‡§Ö‡§™‡§®‡§æ Render URL ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç
        
        const generateBtn = document.getElementById('generateBtn');
        const titleInput = document.getElementById('titleInput');
        const errorMsg = document.getElementById('errorMsg');
        const contentContainer = document.getElementById('contentContainer');
        const optionsList = document.getElementById('optionsList');

        // ‡§è‡§ï ‡§ï‡•à‡§™‡•ç‡§∂‡§® ‡§∏‡•ç‡§ü‡•ç‡§∞‡§ø‡§Ç‡§ó ‡§ï‡•ã ‡§Ö‡§≤‡§ó-‡§Ö‡§≤‡§ó ‡§ï‡•à‡§™‡•ç‡§∂‡§® ‡§î‡§∞ ‡§ü‡•à‡§ó‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§≠‡§æ‡§ú‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
        function parseCaptionAndTags(fullCaption) {
            // ‡§π‡•à‡§∂‡§ü‡•à‡§ó ‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§Ö‡§Ç‡§§ ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§π‡§Æ ‡§á‡§∏‡•á ‡§¶‡•ã ‡§≠‡§æ‡§ó‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¨‡§æ‡§Ç‡§ü‡•á‡§Ç‡§ó‡•á‡•§
            const hashtagRegex = /#\w+/g; 
            const tags = (fullCaption.match(hashtagRegex) || []).join(' ');
            
            // ‡§ï‡•à‡§™‡•ç‡§∂‡§®: ‡§ü‡•à‡§ó‡•ç‡§∏ ‡§ï‡•ã ‡§π‡§ü‡§æ‡§ï‡§∞ ‡§¨‡§æ‡§ï‡•Ä ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§ï‡•ã ‡§ï‡•à‡§™‡•ç‡§∂‡§® ‡§Æ‡§æ‡§®‡§§‡•á ‡§π‡•à‡§Ç
            let caption = fullCaption.replace(hashtagRegex, '').trim();

            // ‡§Ö‡§ó‡§∞ caption ‡§¨‡§π‡•Å‡§§ ‡§õ‡•ã‡§ü‡§æ ‡§π‡•à, ‡§§‡•ã ‡§™‡•Ç‡§∞‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§π‡•Ä ‡§ï‡•à‡§™‡•ç‡§∂‡§® ‡§π‡•à (‡§ü‡•à‡§ó‡•ç‡§∏ ‡§ï‡•á ‡§¨‡§ø‡§®‡§æ)
            if (caption.length < fullCaption.length * 0.5 && tags.length > 0) {
                // ‡§´‡•Å‡§≤ ‡§ï‡•à‡§™‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ü‡•à‡§ó‡•ç‡§∏ ‡§ï‡•ã ‡§π‡§ü‡§æ ‡§¶‡•á‡§Ç
                caption = fullCaption.replace(tags, '').trim();
            }

            // ‡§Ö‡§ó‡§∞ AI ‡§®‡•á ‡§ï‡•à‡§™‡•ç‡§∂‡§® ‡§î‡§∞ ‡§ü‡•à‡§ó‡•ç‡§∏ ‡§ï‡•ã ‡§è‡§ï ‡§π‡•Ä ‡§≤‡§æ‡§á‡§® ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§¶‡§ø‡§Ø‡§æ, ‡§§‡•ã ‡§π‡§Æ ‡§∏‡§ø‡§∞‡•ç‡§´‡§º ‡§™‡§π‡§≤‡•Ä ‡§≤‡§æ‡§á‡§® ‡§ï‡•ã ‡§ï‡•à‡§™‡•ç‡§∂‡§® ‡§Æ‡§æ‡§®‡§§‡•á ‡§π‡•à‡§Ç‡•§
            if (caption.includes('\n')) {
                const parts = caption.split('\n').filter(p => p.trim() !== '');
                caption = parts[0] || 'Check the full text below.';
            }

            // ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§ü‡•à‡§ó‡•ç‡§∏ ‡§∏‡§æ‡§´‡§º ‡§¶‡§ø‡§ñ‡•á‡§Ç
            const formattedTags = tags.length > 0 ? tags : "#InstaViral #TrendingReels #ExplorePage";
            
            return {
                caption: caption,
                tags: formattedTags
            };
        }

        generateBtn.addEventListener('click', async () => {
            errorMsg.textContent = '';
            optionsList.innerHTML = '';
            contentContainer.style.display = 'none';

            const title = titleInput.value.trim();
            if (!title) {
                errorMsg.textContent = 'Please enter a video/photo topic.';
                return;
            }

            optionsList.innerHTML = `<div style="text-align:center; padding: 20px;">Loading... Generating best captions for you...</div>`;
            contentContainer.style.display = 'block';

            try {
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ title })
                });

                if (!response.ok) {
                    const errData = await response.json();
                    throw new Error(errData.error || 'Server error: Failed to get AI response.');
                }

                const data = await response.json();
                optionsList.innerHTML = '';

                if (data.captions && data.captions.length > 0) {
                    data.captions.forEach((fullCaption, index) => {
                        const parsed = parseCaptionAndTags(fullCaption);
                        
                        // ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§Ü‡§á‡§ü‡§Æ (‡§™‡•Ç‡§∞‡§æ ‡§ë‡§™‡•ç‡§∂‡§® ‡§¨‡•â‡§ï‡•ç‡§∏)
                        const li = document.createElement('li');
                        li.className = 'option';
                        li.innerHTML = `
                            <h2>Option ${index + 1}</h2>
                            <span class="label">Caption:</span>
                            <div class="caption-text" id="caption-${index}">${parsed.caption}</div>
                            
                            <span class="label" style="margin-top: 15px;">Trending Hashtags:</span>
                            <div class="tags-text" id="tags-${index}">${parsed.tags}</div>
                            
                            <button class="copy-btn" data-target="caption-${index}|tags-${index}">Copy All</button>
                        `;
                        optionsList.appendChild(li);
                    });

                    // ‡§∏‡§≠‡•Ä 'Copy All' ‡§¨‡§ü‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§á‡§µ‡•á‡§Ç‡§ü ‡§≤‡§ø‡§∏‡§®‡§∞
                    document.querySelectorAll('.copy-btn').forEach(button => {
                        button.addEventListener('click', (e) => {
                            const targets = e.target.dataset.target.split('|');
                            const captionText = document.getElementById(targets[0]).textContent.trim();
                            const tagsText = document.getElementById(targets[1]).textContent.trim();
