<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Image to PDF Converter & Editor | PooreYouTuber Tools</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>
    
    <style>
        /* General Styling */
        body { font-family: Arial, sans-serif; background-color: #f4f4f9; padding: 20px; }
        .container { max-width: 1100px; margin: 0 auto; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        
        .upload-section { margin-bottom: 30px; padding: 20px; border: 2px dashed #007bff; border-radius: 8px; text-align: center; }
        
        /* Image List Styling */
        .image-list { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-top: 20px; }
        .image-card { 
            position: relative; 
            border: 1px solid #ddd; 
            padding: 10px; 
            border-radius: 8px; 
            width: 240px; 
            background: #f9f9f9;
        }
        .image-card img { 
            width: 100%; 
            height: 150px; 
            object-fit: contain; 
            display: block; 
            margin-bottom: 10px; 
            border-radius: 4px;
        }
        .edit-controls { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 5px; 
            margin-top: 10px; 
            justify-content: space-between;
        }
        
        /* Button Styling */
        .button { background-color: #007bff; color: white; padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; transition: background-color 0.3s; }
        .button:hover { background-color: #0056b3; }
        .convert-button { width: 100%; margin-top: 30px; padding: 15px; font-size: 18px; background-color: #28a745; }
        .convert-button:hover { background-color: #1e7e34; }
        
        .delete-btn { background-color: #dc3545; }
        .delete-btn:hover { background-color: #c82333; }
        
        .filter-select { width: 100%; padding: 6px; border-radius: 4px; margin-top: 5px; }

        /* Cropping Modal Style */
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.9); }
        .modal-content { background-color: #fefefe; margin: 5% auto; padding: 20px; border: 1px solid #888; width: 90%; max-width: 800px; border-radius: 8px; }
        .close { color: #aaa; float: right; font-size: 28px; font-weight: bold; }
        .close:hover, .close:focus { color: #fff; text-decoration: none; cursor: pointer; }
        #crop-image-container { max-height: 50vh; margin-bottom: 20px; }
        #crop-image { max-width: 100%; display: block; }
        .cropper-view-box { border-radius: 0 !important; }

        /* Content Section Styles for SEO */
        .content-section {
            padding: 25px;
            border: 1px solid #ffe0b2;
            border-radius: 10px;
            margin-top: 40px;
            background-color: #fffaf0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .content-section h2 {
            color: #d84315;
            border-bottom: 2px solid #ffcc80;
            padding-bottom: 5px;
            margin-top: 20px;
        }
        .content-section ol {
            padding-left: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìë Image-to-PDF Converter & Pro Editor</h1>
        <p>Upload your images, crop, apply filters, and download them as a single PDF file.</p>
        
        <div class="upload-section">
            <input type="file" id="image-upload" accept="image/*" multiple>
        </div>

        <div class="image-list" id="image-list">
            </div>

        <button class="button convert-button" onclick="convertToPDF()">Convert All Edited Images to PDF and Download</button>

        <div class="content-section">
            <h2>About the Pro Image-to-PDF Converter & Editor</h2>
            <p>Welcome to the **Pro Image-to-PDF Converter & Editor** by PooreYouTuber Tools. This is a powerful, secure, and user-friendly online utility that lets you transform one or more images ($\mathbf{JPEG}$, $\mathbf{PNG}$) into a polished, single PDF document. Whether you're a content creator compiling research notes, a student digitizing homework, or a professional creating a presentation, our tool ensures high-quality output every time. The core process utilizes client-side rendering with the $\mathbf{jsPDF}$ library, meaning your sensitive images remain absolutely **private** and are **never uploaded** to any server.</p>

            <hr>

            <h2>Mastering the Editing Features: Crop and Filter</h2>
            <p>What sets our tool apart are the integrated editing controls, ensuring your images are perfectly sized and styled before conversion. Once you upload your files using the designated area, you will see a list of image cards. Here's how to use the editing features:</p>
            <ol>
                <li>**Select an Image Card:** Each uploaded image displays a preview, a dropdown $\mathbf{Filter\ Select}$ option, and an $\mathbf{Edit\ Controls}$ section.</li>
                <li>**Quick Filters:** Use the primary dropdown menu on the image card to instantly apply CSS-based filters for previewing. Options include **Original**, **Black & White** (Grayscale), **Soft Tone** (Sepia), and **Vibrant**. This is fast but doesn't permanently change the image data until the next step.</li>
                <li>**Advanced Editing:** Click the **"‡§ï‡•ç‡§∞‡•â‡§™ / ‡§è‡§°‡§µ‡§æ‡§Ç‡§∏ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞"** button (which translates to **Crop / Advanced Filter**) to open the modal. This is where the magic happens:
                    <ul>
                        <li>**Cropping:** The main area features the $\mathbf{Cropper.js}$ tool, allowing precise selection of the image area. This is essential for removing unnecessary borders or setting specific aspect ratios for professional documents.</li>
                        <li>**Filter Application:** In the modal, the **Color Filter** selector (**Original, Grayscale, Sepia, Vibrant**) determines the final look.</li>
                        <li>To finalize your adjustments, hit the **"‡§ï‡•ç‡§∞‡•â‡§™ ‡§î‡§∞ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡•á‡§Ç"** button (meaning **Apply Crop and Filter**). This action renders the cropped and filtered image onto a canvas, creating a new **Edited Data URL** that will be used for the final PDF.</li>
                    </ul>
                </li>
                <li>**Removing Images:** If you change your mind, the **"‡§π‡§ü‡§æ‡§è‡§Å"** button (meaning **Delete**) removes the image from the list and the PDF queue immediately.</li>
            </ol>

            <hr>
            
            <h2>Finalizing the PDF Conversion and Download</h2>
            <p>After perfecting your images, the final step is conversion. The large, prominent button labeled **"Convert All Edited Images to PDF and Download"** initiates the process. The tool sequentially places each edited image onto a new A4 page within the PDF, automatically scaling it to fit while maintaining aspect ratio and quality. The use of $\mathbf{Image\ Properties}$ and careful scaling ensures that your visual content looks sharp on every page of the final PDF.</p>
            <p>Our commitment is to provide a $\mathbf{100\%}$ free, $\mathbf{privacy-focused}$ tool for high-efficiency document creation. By relying on browser technologies, we eliminate server load and security concerns, delivering the final, merged PDF directly to your downloads folder instantly. This feature makes us the preferred choice for reliable $\mathbf{Image-to-PDF\ conversion}$ and $\mathbf{editing\ online}$.</p>
        </div>
    </div>

    <div id="crop-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>‡§á‡§Æ‡•á‡§ú ‡§ï‡•ç‡§∞‡•â‡§™ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§è‡§°‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç</h2>
            <div id="crop-image-container">
                <img id="crop-image" alt="‡§ï‡•ç‡§∞‡•â‡§™ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§á‡§Æ‡•á‡§ú">
            </div>
            <button class="button convert-button" style="width:auto; float:right;" onclick="applyCropAndFilter()">‡§ï‡•ç‡§∞‡•â‡§™ ‡§î‡§∞ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
            
            <label for="modal-filter-select" style="font-weight: normal;">‡§ï‡§≤‡§∞ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞:</label>
            <select id="modal-filter-select" class="filter-select" style="width: 200px;">
                <option value="original">Original</option>
                <option value="grayscale">Black & White (Grayscale)</option>
                <option value="sepia">Soft Tone (Sepia)</option>
                <option value="vibrant">Vibrant (Saturation)</option>
            </select>
        </div>
    </div>

    <script>
        // **********************************************
        // ********* JAvaScript Logic (Unchanged) *********
        // **********************************************
        const { jsPDF } = window.jspdf;
        const imageList = document.getElementById('image-list');
        const imageUpload = document.getElementById('image-upload');
        const cropModal = document.getElementById('crop-modal');
        const cropImage = document.getElementById('crop-image');
        const modalFilterSelect = document.getElementById('modal-filter-select');

        let imagesData = [];
        let cropperInstance = null;
        let currentImageId = null;

        // 1. Handling Multiple Images
        imageUpload.addEventListener('change', (event) => {
            const files = event.target.files;
            Array.from(files).forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        addImageCard(e.target.result);
                    };
                    reader.readAsDataURL(file);
                }
            });
            imageUpload.value = '';
        });

        // 2. Creating Image Cards
        function addImageCard(dataURL) {
            const id = Date.now();
            
            const newImage = {
                id: id,
                originalDataURL: dataURL,
                editedDataURL: dataURL,
                filter: 'original',
                cropData: null,
            };
            imagesData.push(newImage);

            const card = document.createElement('div');
            card.className = 'image-card';
            card.dataset.id = id;

            card.innerHTML = `
                <img src="${dataURL}" alt="Uploaded Image" id="img-preview-${id}">
                <select id="filter-select-${id}" class="filter-select" onchange="updateFilter(${id}, this.value)">
                    <option value="original">Original</option>
                    <option value="grayscale">Black & White</option>
                    <option value="sepia">Soft Tone (Sepia)</option>
                    <option value="vibrant">Vibrant</option>
                </select>
                <div class="edit-controls">
                    <button class="button" onclick="openCropModal(${id})">‡§ï‡•ç‡§∞‡•â‡§™ / ‡§è‡§°‡§µ‡§æ‡§Ç‡§∏ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞</button>
                    <button class="button delete-btn" onclick="deleteImage(${id})">‡§π‡§ü‡§æ‡§è‡§Å</button>
                </div>
            `;
            imageList.appendChild(card);
        }

        // 3. Updating Filter (for preview only)
        function updateFilter(id, filterValue) {
            const imgData = imagesData.find(img => img.id === id);
            const imgElement = document.getElementById(`img-preview-${id}`);
            
            imgData.filter = filterValue; 

            applyCssFilter(imgElement, filterValue);
        }

        function applyCssFilter(element, filter) {
            switch (filter) {
                case 'grayscale':
                    element.style.filter = 'grayscale(100%)';
                    break;
                case 'sepia':
                    element.style.filter = 'sepia(80%) saturate(120%)';
                    break;
                case 'vibrant':
                    element.style.filter = 'saturate(150%) brightness(110%)';
                    break;
                case 'original':
                default:
                    element.style.filter = 'none';
                    break;
            }
        }


        // 4. Opening Cropping Modal
        function openCropModal(id) {
            const imgData = imagesData.find(img => img.id === id);
            currentImageId = id;
            
            if (cropperInstance) {
                cropperInstance.destroy();
            }

            cropImage.src = imgData.originalDataURL;
            modalFilterSelect.value = imgData.filter; 
            
            cropModal.style.display = "block";
            
            setTimeout(() => {
                cropperInstance = new Cropper(cropImage, {
                    aspectRatio: NaN,
                    viewMode: 1,
                    initialAspectRatio: imgData.cropData ? imgData.cropData.width / imgData.cropData.height : NaN,
                    ready: function () {
                        if (imgData.cropData) {
                            this.cropper.setData(imgData.cropData);
                        }
                    }
                });
            }, 100);
        }
        
        // 5. Applying Crop and Filter (Canvas Logic)
        function applyCropAndFilter() {
            const id = currentImageId;
            const imgData = imagesData.find(img => img.id === id);
            const selectedFilter = modalFilterSelect.value;

            if (!cropperInstance) return;

            const cropData = cropperInstance.getData();
            imgData.cropData = cropData; 

            const croppedCanvas = cropperInstance.getCroppedCanvas();
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            canvas.width = croppedCanvas.width;
            canvas.height = croppedCanvas.height;

            applyCanvasFilter(ctx, selectedFilter);

            ctx.drawImage(croppedCanvas, 0, 0, canvas.width, canvas.height);

            const finalDataURL = canvas.toDataURL('image/jpeg', 0.9);
            
            imgData.editedDataURL = finalDataURL;
            imgData.filter = selectedFilter; 
            
            const previewImg = document.getElementById(`img-preview-${id}`);
            previewImg.src = finalDataURL;
            previewImg.style.filter = 'none'; 
            
            document.getElementById(`filter-select-${id}`).value = selectedFilter;
            
            closeModal();
            alert("‡§ï‡•ç‡§∞‡•â‡§™ ‡§î‡§∞ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§ø‡§è ‡§ó‡§è!");
        }

        // Canvas Filter Function
        function applyCanvasFilter(ctx, filter) {
            switch (filter) {
                case 'grayscale':
                    ctx.filter = 'grayscale(100%)';
                    break;
                case 'sepia':
                    ctx.filter = 'sepia(80%) saturate(120%)';
                    break;
                case 'vibrant':
                    ctx.filter = 'saturate(150%) brightness(110%)';
                    break;
                case 'original':
                default:
                    ctx.filter = 'none';
                    break;
            }
        }

        // 6. Closing Modal
        function closeModal() {
            cropModal.style.display = "none";
            if (cropperInstance) {
                cropperInstance.destroy();
                cropperInstance = null;
            }
        }
        
        // 7. Deleting Image
        function deleteImage(id) {
            const card = document.querySelector(`.image-card[data-id="${id}"]`);
            if (card) {
                card.remove();
                imagesData = imagesData.filter(img => img.id !== id);
            }
        }

        // 8. Converting to PDF
        function convertToPDF() {
            if (imagesData.length === 0) {
                alert("‡§™‡§π‡§≤‡•á ‡§è‡§ï ‡§Ø‡§æ ‡§è‡§ï ‡§∏‡•á ‡§ú‡§º‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§á‡§Æ‡•á‡§ú ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç!");
                return;
            }

            const doc = new jsPDF();
            let isFirstPage = true;

            imagesData.forEach((imgData, index) => {
                if (!isFirstPage) {
                    doc.addPage();
                }
                
                const finalDataURL = imgData.editedDataURL;

                const imgProps = doc.getImageProperties(finalDataURL);
                const pdfWidth = doc.internal.pageSize.getWidth();
                const pdfHeight = doc.internal.pageSize.getHeight();
                const ratio = imgProps.width / imgProps.height;
                
                let finalImgWidth = pdfWidth * 0.9;
                let finalImgHeight = finalImgWidth / ratio;

                if (finalImgHeight > pdfHeight * 0.9) { 
                    finalImgHeight = pdfHeight * 0.9;
                    finalImgWidth = finalImgHeight * ratio;
                }

                const x = (pdfWidth - finalImgWidth) / 2;
                const y = (pdfHeight - finalImgHeight) / 2;

                doc.addImage(finalDataURL, 'JPEG', x, y, finalImgWidth, finalImgHeight);
                isFirstPage = false;
            });
            
            doc.save("edited_images_to_pdf.pdf");
        }
    </script>
</body>
</html>
