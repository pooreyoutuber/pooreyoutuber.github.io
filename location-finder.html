<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Location Finder & Phone Lookup</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f4f6f9;margin:0;padding:18px;color:#111}
    .card{max-width:980px;margin:12px auto;background:#fff;padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
    h1{margin:4px 0 8px;font-size:20px}
    label{display:block;margin-top:10px;font-weight:600}
    input[type="text"], input[type="number"], select, button {
      padding:10px;border-radius:8px;border:1px solid #ddd;font-size:14px;
    }
    input[type="text"]{width:60%;min-width:200px}
    button{background:#0b78e3;color:#fff;border:0;padding:10px 14px;border-radius:8px;cursor:pointer}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    #map {width:100%;height:360px;border-radius:10px;margin-top:12px;border:0}
    .small{font-size:13px;color:#666}
    .result{margin-top:12px;padding:10px;background:#f9fbff;border-radius:8px;border:1px solid #e6f0ff}
    .error{color:#b00020;font-weight:700;margin-top:8px}
    @media(max-width:640px){ input[type="text"]{width:100%} }
  </style>
</head>
<body>
  <div class="card">
    <h1>üìç Location Finder & ‚òéÔ∏è Phone Lookup</h1>
    <p class="small">Location ke liye "Find My Location" dabaiye. Phone lookup ke liye number daaliye aur "Lookup" dabaiye. (Owner name reveal karna is page se allowed nahi)</p>

    <!-- LOCATION -->
    <label>Find My Location</label>
    <div class="row">
      <button id="findLoc">Find My Location</button>
      <span id="locStatus" class="small"></span>
    </div>
    <p id="coords" class="small"></p>
    <iframe id="map" src="" loading="lazy"></iframe>
  </div>

  <div class="card" style="margin-top:14px;">
    <h2>üì± Phone Lookup</h2>
    <div class="row" style="align-items:center;">
      <input id="phone" type="text" placeholder="+911234567890 or 912345678900" />
      <select id="countryHint" title="Optional: choose a country prefix">
        <option value="">Auto</option>
        <option value="IN">India (+91)</option>
        <option value="US">USA (+1)</option>
        <option value="GB">UK (+44)</option>
        <option value="PK">Pakistan (+92)</option>
        <option value="BD">Bangladesh (+880)</option>
      </select>
      <button id="lookup">Lookup</button>
    </div>

    <p class="small">Note: For full lookup (carrier, line_type, location), set an API provider & key below in the JavaScript section.</p>
    <div id="phoneResult" class="result" style="display:none"></div>
    <div id="phoneError" class="error" style="display:none"></div>
  </div>

  <script>
    // ---------- CONFIG ----------
    // If you want real phone lookup, choose an API provider and set your API key here:
    // Options:
    // 1) AbstractAPI (recommended): https://www.abstractapi.com/phone-validation-api
    //    Example endpoint: https://phonevalidation.abstractapi.com/v1/?api_key=YOUR_KEY&phone=+9198...
    // 2) Numverify (apilayer): https://numverify.com/  (endpoint: httpS://apilayer.net/api/validate?access_key=KEY&number=...)
    //
    // Put provider name 'abstract' or 'numverify' and your key. If left empty, the script will do only basic local parsing.
    const API_PROVIDER = ''; // 'abstract' OR 'numverify' OR ''
    const API_KEY = ''; // your API key as string

    // ---------- LOCATION ----------
    const findBtn = document.getElementById('findLoc');
    const locStatus = document.getElementById('locStatus');
    const coordsP = document.getElementById('coords');
    const mapFrame = document.getElementById('map');

    findBtn.addEventListener('click', () => {
      locStatus.textContent = 'Trying to get location... (allow permission)';
      coordsP.textContent = '';
      mapFrame.src = '';
      if (!navigator.geolocation) {
        locStatus.textContent = 'Geolocation not supported by browser';
        return;
      }
      navigator.geolocation.getCurrentPosition(pos => {
        locStatus.textContent = 'Location found';
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;
        coordsP.textContent = `Latitude: ${lat}, Longitude: ${lon}`;
        // show map using Google Maps embed
        mapFrame.src = `https://www.google.com/maps?q=${lat},${lon}&output=embed`;
      }, err => {
        locStatus.textContent = 'Unable to retrieve location. Please allow permission.';
      }, {enableHighAccuracy:true, timeout:10000});
    });

    // ---------- PHONE LOOKUP ----------
    const lookupBtn = document.getElementById('lookup');
    const phoneInput = document.getElementById('phone');
    const countryHint = document.getElementById('countryHint');
    const phoneResult = document.getElementById('phoneResult');
    const phoneError = document.getElementById('phoneError');

    function showPhoneError(text){
      phoneError.style.display = 'block';
      phoneError.textContent = text;
      phoneResult.style.display = 'none';
    }
    function showPhoneResult(html){
      phoneResult.style.display = 'block';
      phoneResult.innerHTML = html;
      phoneError.style.display = 'none';
    }

    function basicGuessFromPrefix(num){
      // very small mapping for fallback
      const map = {
        '+91': 'India',
        '+1': 'United States/Canada',
        '+44': 'United Kingdom',
        '+92': 'Pakistan',
        '+880': 'Bangladesh',
        '+61': 'Australia',
        '+91': 'India'
      };
      for(const prefix in map){
        if(num.startsWith(prefix)) return map[prefix] + ' (prefix ' + prefix + ')';
      }
      return 'Unknown (no API key provided)';
    }

    // Normalize number helper
    function normalizeNumber(raw){
      if(!raw) return null;
      raw = raw.trim();
      // Remove spaces, parentheses, dashes
      let cleaned = raw.replace(/[\s()-]/g,'');
      // If starts with 00 -> replace with +
      if(cleaned.startsWith('00')) cleaned = '+' + cleaned.slice(2);
      // If starts with a digit and seems like local number and country hint provided, prepend country's dialing code
      if(!cleaned.startsWith('+') && countryHint.value){
        const map = { 'IN': '+91', 'US': '+1', 'GB': '+44', 'PK': '+92','BD': '+880' };
        if(map[countryHint.value]) cleaned = map[countryHint.value] + cleaned;
      }
      return cleaned;
    }

    async function callAbstractApi(number){
      const url = `https://phonevalidation.abstractapi.com/v1/?api_key=${encodeURIComponent(API_KEY)}&phone=${encodeURIComponent(number)}`;
      const r = await fetch(url);
      if(!r.ok) throw new Error('API error: ' + r.status);
      return r.json();
    }
    async function callNumverify(number){
      // numverify/ apilayer endpoint example (you must have https enabled key)
      // Replace with exact endpoint if using apilayer paid plan.
      const url = `https://apilayer.net/api/validate?access_key=${encodeURIComponent(API_KEY)}&number=${encodeURIComponent(number)}`;
      const r = await fetch(url);
      if(!r.ok) throw new Error('API error: ' + r.status);
      return r.json();
    }

    lookupBtn.addEventListener('click', async () => {
      phoneResult.style.display = 'none';
      phoneError.style.display = 'none';

      const raw = phoneInput.value;
      if(!raw) { showPhoneError('Please enter a phone number'); return; }
      const normalized = normalizeNumber(raw);
      if(!normalized){ showPhoneError('Unable to normalize number'); return; }

      // Basic validation
      if(!/^\+?[0-9]{6,15}$/.test(normalized)){ showPhoneError('Number looks invalid after formatting: ' + normalized); return; }
      showPhoneResult('<div class="small">Looking up: <strong>' + normalized + '</strong></div><div class="small">Please wait...</div>');

      // If API configured, call it
      try{
        if(API_PROVIDER && API_KEY){
          let data;
          if(API_PROVIDER === 'abstract'){
            data = await callAbstractApi(normalized);
            // Abstract returns fields like valid, country, location, carrier, line_type
            const html = `
              <div><strong>Number:</strong> ${normalized}</div>
              <div><strong>Valid:</strong> ${data.valid ? 'Yes' : 'No'}</div>
              <div><strong>Country:</strong> ${data.country ? data.country : '‚Äî'}</div>
              <div><strong>Location:</strong> ${data.location ? data.location : '‚Äî'}</div>
              <div><strong>Carrier:</strong> ${data.carrier ? data.carrier : '‚Äî'}</div>
              <div><strong>Line type:</strong> ${data.line_type ? data.line_type : '‚Äî'}</div>
              <div class="small" style="margin-top:6px;color:#555">Source: AbstractAPI (requires paid key for full details)</div>
            `;
            showPhoneResult(html);
          } else if(API_PROVIDER === 'numverify'){
            data = await callNumverify(normalized);
            // numverify returns valid, country_name, location, carrier, line_type
            const html = `
              <div><strong>Number:</strong> ${normalized}</div>
              <div><strong>Valid:</strong> ${data.valid ? 'Yes' : 'No'}</div>
              <div><strong>Country:</strong> ${data.country_name ? data.country_name : '‚Äî'}</div>
              <div><strong>Location:</strong> ${data.location ? data.location : '‚Äî'}</div>
              <div><strong>Carrier:</strong> ${data.carrier ? data.carrier : '‚Äî'}</div>
              <div><strong>Line type:</strong> ${data.line_type ? data.line_type : '‚Äî'}</div>
              <div class="small" style="margin-top:6px;color:#555">Source: Numverify / apilayer</div>
            `;
            showPhoneResult(html);
          } else {
            // unknown provider
            showPhoneError('API provider not supported in config');
          }
        } else {
          // No API configured: fallback to simple prefix guess
          const guess = basicGuessFromPrefix(normalized);
          const html = `
            <div><strong>Number (formatted):</strong> ${normalized}</div>
            <div><strong>Guessed country:</strong> ${guess}</div>
            <div class="small" style="margin-top:6px;color:#555">No API key provided ‚Äî only basic guess possible. To get carrier/valid info, set API_PROVIDER & API_KEY in the script.</div>
          `;
          showPhoneResult(html);
        }
      } catch(err){
        showPhoneError('Lookup failed: ' + (err.message || err));
        console.error(err);
      }
    });
  </script>
</body>
</html>w
