<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi Browser - Web Behavior Simulation Tool</title>
    <style>
        /* CSS: Styling aur Layout */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 10px;
            background-color: #f4f4f4;
            overflow: hidden; /* Main page scroll na ho */
        }

        .controls-panel {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
            padding: 15px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .url-input-section { display: flex; gap: 10px; }
        #urlInput { flex-grow: 1; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; }
        #loadButton { padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: bold; transition: background-color 0.3s; }
        #loadButton:hover { background-color: #0056b3; }
        
        .auto-options { display: flex; gap: 20px; padding-top: 10px; border-top: 1px solid #eee; }
        .auto-options label { display: flex; align-items: center; font-weight: 500; cursor: pointer; }

        /* Iframe Grid Layout - Desktop View Hint ke liye Bada Size */
        .iframe-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); 
            gap: 10px; 
            height: calc(100vh - 150px);
        }

        .iframe-container {
            border: 1px solid #ddd;
            border-radius: 6px;
            overflow: hidden; 
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            position: relative; /* Visual indicator ke liye zaroori */
        }

        .browser-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Visual Click Indicator (Infinity symbol) */
        .click-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
            color: #ff5722;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            animation: spin 1s infinite linear;
            z-index: 10;
            display: none; /* By default hidden */
        }
        .click-indicator.active {
            display: block;
        }
        @keyframes spin {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Responsive Adjustments */
        @media (max-width: 1200px) { .iframe-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 800px) { 
            .iframe-grid { grid-template-columns: repeat(2, 1fr); } 
            .auto-options { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>

    <div class="controls-panel">
        <div class="url-input-section">
            <input type="text" id="urlInput" placeholder="URL daalein (Jaise: https://www.wikipedia.org)">
            <button id="loadButton">10 Views Load Karein</button>
        </div>

        <div class="auto-options">
            <label title="Auto-Reload: Har 30 second mein sabhi tabs ko refresh karega.">
                <input type="checkbox" id="autoReloadCheck">
                Auto Reload (30 sec)
            </label>
            <label title="Bi-directional Scroll: Sabhi tabs ko upar-neeche scroll karega, jaise koi user padh raha ho.">
                <input type="checkbox" id="autoScrollCheck" checked>
                Bi-directional Scrolling
            </label>
            <label title="Realistic Click: Random interval par kisi 1 tab mein sirf 1 link par click karega aur activity dikhayega.">
                <input type="checkbox" id="autoClicksCheck">
                Realistic Click Simulation
            </label>
        </div>
    </div>

    <div class="iframe-grid" id="iframeContainer">
        <div class="iframe-container"><iframe class="browser-iframe" id="iframe0"></iframe><div class="click-indicator">∞</div></div>
        <div class="iframe-container"><iframe class="browser-iframe" id="iframe1"></iframe><div class="click-indicator">∞</div></div>
        <div class="iframe-container"><iframe class="browser-iframe" id="iframe2"></iframe><div class="click-indicator">∞</div></div>
        <div class="iframe-container"><iframe class="browser-iframe" id="iframe3"></iframe><div class="click-indicator">∞</div></div>
        <div class="iframe-container"><iframe class="browser-iframe" id="iframe4"></iframe><div class="click-indicator">∞</div></div>
        <div class="iframe-container"><iframe class="browser-iframe" id="iframe5"></iframe><div class="click-indicator">∞</div></div>
        <div class="iframe-container"><iframe class="browser-iframe" id="iframe6"></iframe><div class="click-indicator">∞</div></div>
        <div class="iframe-container"><iframe class="browser-iframe" id="iframe7"></iframe><div class="click-indicator">∞</div></div>
        <div class="iframe-container"><iframe class="browser-iframe" id="iframe8"></iframe><div class="click-indicator">∞</div></div>
        <div class="iframe-container"><iframe class="browser-iframe" id="iframe9"></iframe><div class="click-indicator">∞</div></div>
    </div>

    <script>
        // JavaScript: Logic aur Controls
        const urlInput = document.getElementById('urlInput');
        const loadButton = document.getElementById('loadButton');
        const autoReloadCheck = document.getElementById('autoReloadCheck');
        const autoScrollCheck = document.getElementById('autoScrollCheck');
        const autoClicksCheck = document.getElementById('autoClicksCheck');
        const numIframes = 10;
        const iframeContainers = document.querySelectorAll('.iframe-container');
        const iframes = Array.from({ length: numIframes }, (_, i) => document.getElementById(`iframe${i}`));
        
        let reloadIntervalId = null;
        let scrollIntervalId = null;
        let clickIntervalId = null;

        loadButton.addEventListener('click', startMultiBrowser);
        
        // Control listeners
        autoReloadCheck.addEventListener('change', () => toggleIntervals(autoReloadCheck.checked, 'reload'));
        autoScrollCheck.addEventListener('change', () => toggleIntervals(autoScrollCheck.checked, 'scroll'));
        autoClicksCheck.addEventListener('change', () => toggleIntervals(autoClicksCheck.checked, 'click'));

        function normalizeUrl(url) {
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                return 'https://' + url;
            }
            return url;
        }

        function loadIframes(url) {
            iframes.forEach((iframe) => {
                iframe.src = url; 
            });
        }

        function startMultiBrowser() {
            let url = urlInput.value.trim();
            if (!url) {
                alert('Kripya koi URL daalein.');
                return;
            }
            url = normalizeUrl(url);

            loadIframes(url);

            // Existing timers ko clear karke naye shuru karna
            clearIntervals();
            
            // Checkboxes ki sthiti (status) ke aadhar par timers shuru karna
            if (autoReloadCheck.checked) toggleIntervals(true, 'reload');
            if (autoScrollCheck.checked) toggleIntervals(true, 'scroll');
            if (autoClicksCheck.checked) toggleIntervals(true, 'click');
        }

        function clearIntervals() {
            clearInterval(reloadIntervalId);
            clearInterval(scrollIntervalId);
            clearInterval(clickIntervalId);
            reloadIntervalId = null;
            scrollIntervalId = null;
            clickIntervalId = null;
        }

        function toggleIntervals(shouldStart, type) {
            if (type === 'reload') {
                if (shouldStart) {
                    if (reloadIntervalId) return;
                    reloadIntervalId = setInterval(reloadFrames, 30000); // 30 seconds
                } else {
                    clearInterval(reloadIntervalId);
                    reloadIntervalId = null;
                }
            } else if (type === 'scroll') {
                if (shouldStart) {
                    if (scrollIntervalId) return;
                    scrollIntervalId = setInterval(scrollFrames, 100); // 100ms
                } else {
                    clearInterval(scrollIntervalId);
                    scrollIntervalId = null;
                }
            } else if (type === 'click') {
                if (shouldStart) {
                    if (clickIntervalId) return;
                    // Random interval 15 se 30 seconds ke beech
                    const randomTime = Math.random() * (15000) + 15000; 
                    clickIntervalId = setInterval(realisticClickSimulation, randomTime);
                } else {
                    clearInterval(clickIntervalId);
                    clickIntervalId = null;
                }
            }
        }

        function reloadFrames() {
            iframes.forEach((iframe) => {
                if (iframe.src) {
                    iframe.contentWindow.location.reload(true);
                }
            });
            console.log('Auto Reload triggered.');
        }

        // --- Bi-directional Scrolling Logic ---
        function scrollFrames() {
            iframes.forEach((iframe) => {
                
                // Har iframe ke liye direction track karein
                if (iframe.scrollDirection === undefined) iframe.scrollDirection = 1; // 1 = down, -1 = up

                try {
                    const doc = iframe.contentDocument || iframe.contentWindow.document;
                    if (doc && doc.body) {
                        const currentScroll = iframe.contentWindow.scrollY;
                        const maxScroll = doc.body.scrollHeight - iframe.clientHeight;
                        const scrollStep = 10 * iframe.scrollDirection; // Direction ke anusaar step

                        iframe.contentWindow.scrollBy(0, scrollStep);
                        
                        // Neeche pahunche: Direction ulta (Reverse direction)
                        if (currentScroll >= maxScroll && iframe.scrollDirection === 1) {
                            iframe.scrollDirection = -1;
                        } 
                        // Upar pahunche: Direction ulta (Reverse direction)
                        else if (currentScroll <= 0 && iframe.scrollDirection === -1) {
                            iframe.scrollDirection = 1;
                        }
                    }
                } catch (e) {
                    // Security ya cross-origin error ko ignore karein
                }
            });
        }
        
        // --- Realistic Click Simulation with Visual Feedback ---
        function realisticClickSimulation() {
            // 1. Ek random iframe chunein
            const randomIndex = Math.floor(Math.random() * numIframes);
            const iframe = iframes[randomIndex];
            const container = iframeContainers[randomIndex];

            try {
                const doc = iframe.contentDocument || iframe.contentWindow.document;
                if (doc) {
                    // 2. Clickable elements (links) ko target karein
                    const links = doc.querySelectorAll('a:not([target="_blank"])');
                    
                    if (links.length > 0) {
                        // 3. Un links mein se bhi ek random link chunein
                        const randomLinkIndex = Math.floor(Math.random() * links.length);
                        const clickableElement = links[randomLinkIndex];

                        if (clickableElement) {
                            // 4. Visual Indicator ON karein (Infinity symbol)
                            const indicator = container.querySelector('.click-indicator');
                            if (indicator) {
                                indicator.classList.add('active');
                            }
                            
                            // 5. 2 seconds baad click aur indicator OFF karein
                            setTimeout(() => {
                                clickableElement.click();
                                console.log(`Realistic Click: Iframe ${randomIndex} mein link par click kiya.`);
                                
                                // Indicator band kar dein
                                if (indicator) {
                                    indicator.classList.remove('active');
                                }

                                // Click ke baad, click interval ko reset kar dein (taki agla click random time par ho)
                                toggleIntervals(false, 'click');
                                toggleIntervals(true, 'click');

                            }, 2000); // 2 seconds tak indicator dikhega
                        }
                    }
                }
            } catch (e) {
                console.warn(`Click Simulation Error on Iframe ${randomIndex}:`, e.message);
            }
        }
        
    </script>

</body>
</html>
