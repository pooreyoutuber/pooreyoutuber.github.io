<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Image to PDF Converter & Editor | PooreYouTuber Tools</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>
    
    <style>
        /* рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдЯрд╛рдЗрд▓рд┐рдВрдЧ */
        body { font-family: Arial, sans-serif; background-color: #f4f4f9; padding: 20px; }
        .container { max-width: 1100px; margin: 0 auto; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        
        .upload-section { margin-bottom: 30px; padding: 20px; border: 2px dashed #007bff; border-radius: 8px; text-align: center; }
        
        .image-list { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-top: 20px; }
        .image-card { 
            position: relative; 
            border: 1px solid #ddd; 
            padding: 10px; 
            border-radius: 8px; 
            width: 240px; 
            background: #f9f9f9;
        }
        .image-card img { 
            width: 100%; 
            height: 150px; 
            object-fit: contain; 
            display: block; 
            margin-bottom: 10px; 
            border-radius: 4px;
        }
        .edit-controls { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 5px; 
            margin-top: 10px; 
            justify-content: space-between;
        }
        
        /* рдмрдЯрди рд╕реНрдЯрд╛рдЗрд▓рд┐рдВрдЧ */
        .button { background-color: #007bff; color: white; padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; transition: background-color 0.3s; }
        .button:hover { background-color: #0056b3; }
        .convert-button { width: 100%; margin-top: 30px; padding: 15px; font-size: 18px; background-color: #28a745; }
        .convert-button:hover { background-color: #1e7e34; }
        
        .delete-btn { background-color: #dc3545; }
        
        /* Description Section Styles */
        #description-content {
            display: none; /* рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЫреБрдкрд╛ рд╣реБрдЖ */
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            margin-top: 20px;
            background-color: #fff8e1; /* рд╣рд▓реНрдХрд╛ рдкреАрд▓рд╛ рд░рдВрдЧ рддрд╛рдХрд┐ рдзреНрдпрд╛рди рдЖрдХрд░реНрд╖рд┐рдд рдХрд░реЗ */
        }
        #toggle-description-btn {
            background-color: #ff9800;
            color: #333;
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            font-weight: bold;
        }
        #toggle-description-btn:hover {
            background-color: #fb8c00;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ЁЯУС рдЗрдореЗрдЬ-рдЯреВ-PDF рдХрдирд╡рд░реНрдЯрд░ рдФрд░ рдкреНрд░реЛ рдПрдбрд┐рдЯрд░</h1>
        <p>рдЕрдкрдиреА рдЗрдореЗрдЬ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ, рдХреНрд░реЙрдк рдХрд░реЗрдВ, рдлрд┐рд▓реНрдЯрд░ рд▓рдЧрд╛рдПрдБ рдФрд░ рдПрдХ рд╕рд┐рдВрдЧрд▓ PDF рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВред</p>
        
        <div class="tool-interface">
            <div class="upload-section">
                <input type="file" id="image-upload" accept="image/*" multiple>
            </div>

            <div class="image-list" id="image-list">
                </div>

            <button class="button convert-button" onclick="convertToPDF()">рд╕рднреА рдПрдбрд┐рдЯреЗрдб рдЗрдореЗрдЬ рдХреЛ PDF рдореЗрдВ рдХрдиреНрд╡рд░реНрдЯ рдХрд░реЗрдВ рдФрд░ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ</button>
        </div>
        
        <button class="button" id="toggle-description-btn" onclick="toggleDescription()">рдЯреВрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА, рдЙрдкрдпреЛрдЧ рдФрд░ рдлрд╛рдпрджреЗ (400+ рд╢рдмреНрдж)</button>

        <div id="description-content">
            <h2>рдЯреВрд▓ рдХреНрдпрд╛ рд╣реИ рдФрд░ рдпрд╣ рдЖрдкрдХреЗ рд▓рд┐рдП рдХреНрдпреЛрдВ рдЙрдкрдпреЛрдЧреА рд╣реИ?</h2>
            <p>рд╣рдорд╛рд░рд╛ **рдкреНрд░реЛ рдЗрдореЗрдЬ-рдЯреВ-PDF рдХрдирд╡рд░реНрдЯрд░** рдПрдХ рдореБрдлрд╝реНрдд рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдСрдирд▓рд╛рдЗрди рдЯреВрд▓ рд╣реИ рдЬреЛ рдЖрдкрдХреА $\mathbf{JPEG}$ рдпрд╛ $\mathbf{PNG}$ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдПрдХ рд╣реА рдкреЛрд░реНрдЯреЗрдмрд▓ $\mathbf{PDF}$ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдореЗрдВ рдмрджрд▓рддрд╛ рд╣реИред рдпрд╣ рдЙрди рд╕рднреА рдпреВрдЬрд╝рд░реНрд╕ рдХреЗ рд▓рд┐рдП рдЬрд╝рд░реВрд░реА рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рдиреЛрдЯреНрд╕, рд╣реИрдВрдбрдЖрдЙрдЯреНрд╕, рдпрд╛ рдлреЛрдЯреЛ рдХрд▓реЗрдХреНрд╢рди рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдпрд╛ рдкреНрд░рд┐рдВрдЯ рдХрд░рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рд╣реЛрддреА рд╣реИред</p>
            <p>рдмрд╛рдЬрд╝рд╛рд░ рдХреЗ рдЕрдиреНрдп рдЯреВрд▓реНрд╕ рдХреЗ рд╡рд┐рдкрд░реАрдд, рд╣рдорд╛рд░рд╛ рдЯреВрд▓ $\mathbf{Cropper.js}$ рдЬреИрд╕реА рдПрдбрд╡рд╛рдВрд╕ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЖрдкрдХреЛ **рдкреЗрд╢реЗрд╡рд░ рдХреНрд░реЙрдкрд┐рдВрдЧ** рдФрд░ **рдХрд▓рд░ рдлрд╝рд┐рд▓реНрдЯрд░** (рдЬреИрд╕реЗ Black & White, Soft Tone/Sepia, рдФрд░ Vibrant рдЗрдлрд╝реЗрдХреНрдЯ) рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдкреВрд░реА рд╕реНрд╡рддрдВрддреНрд░рддрд╛ рдорд┐рд▓рддреА рд╣реИред рдпрд╣ рдЯреВрд▓ **рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдмреНрд░рд╛рдЙрдЬрд╝рд░-рдЖрдзрд╛рд░рд┐рдд** рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдкрдХреА рдЗрдореЗрдЬ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдХрд╣реАрдВ рднреА рд╕реЗрд╡ рдирд╣реАрдВ рд╣реЛрддреА; рдЖрдкрдХреА рдЧреЛрдкрдиреАрдпрддрд╛ (Privacy) рд╣рдорд╛рд░реЗ рд▓рд┐рдП рд╕рд░реНрд╡реЛрдкрд░рд┐ рд╣реИред</p>
            
            <hr>
            
            <h2>рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░реЗрдВ? (рдЖрд╕рд╛рди рд╕реНрдЯреЗрдк-рдмрд╛рдп-рд╕реНрдЯреЗрдк рдЧрд╛рдЗрдб)</h2>
            <ol>
                <li>**рдЗрдореЗрдЬ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ:** рдКрдкрд░ рджрд┐рдП рдЧрдП $\mathbf{"Choose\ File"}$ рдмрдЯрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреА рд╕рднреА рдЬрд╝рд░реВрд░реА рдлреЛрдЯреЛ рдПрдХ рд╕рд╛рде рдЪреБрдиреЗрдВред рд╣рд░ рдлреЛрдЯреЛ рдиреАрдЪреЗ рд▓рд┐рд╕реНрдЯ рдореЗрдВ рдПрдХ рдХрд╛рд░реНрдб рдХреЗ рд░реВрдк рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдЧреАред</li>
                <li>**рдХреНрд░реЙрдк рдФрд░ рдлрд╝рд┐рд▓реНрдЯрд░ рд▓рд╛рдЧреВ рдХрд░реЗрдВ:** рд╣рд░ рдЗрдореЗрдЬ рдХрд╛рд░реНрдб рдХреЗ рдиреАрдЪреЗ рдореМрдЬреВрдж $\mathbf{"рдХреНрд░реЙрдк\ /\ рдПрдбрд╡рд╛рдВрд╕\ рдлрд╝рд┐рд▓реНрдЯрд░"}$ рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред
                    <ul>
                        <li>**рдХреНрд░реЙрдкрд┐рдВрдЧ:** Pop-up рд╡рд┐рдВрдбреЛ рдореЗрдВ, рдЗрдореЗрдЬ рдХреЛ рдЦреАрдВрдЪрдХрд░ рдФрд░ рдЬрд╝реВрдо рдХрд░рдХреЗ рдордирдЪрд╛рд╣рд╛ рд╣рд┐рд╕реНрд╕рд╛ рдЪреБрдиреЗрдВред</li>
                        <li>**рдХрд▓рд░ рдлрд╝рд┐рд▓реНрдЯрд░:** Pop-up рдореЗрдВ рджрд┐рдП рдЧрдП рдбреНрд░реЙрдкрдбрд╛рдЙрди рд╕реЗ $\mathbf{Black\ &\ White}$ рдпрд╛ $\mathbf{Soft\ Tone}$ рдЬреИрд╕реЗ рдлрд╝рд┐рд▓реНрдЯрд░ рдЪреБрдиреЗрдВред</li>
                        <li>рдмрджрд▓рд╛рд╡ рд╕реЗрд╡ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП $\mathbf{"рдХреНрд░реЙрдк\ рдФрд░\ рдлрд╝рд┐рд▓реНрдЯрд░\ рд▓рд╛рдЧреВ\ рдХрд░реЗрдВ"}$ рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред</li>
                    </ul>
                </li>
                <li>**PDF рдореЗрдВ рдХрдиреНрд╡рд░реНрдЯ рдХрд░реЗрдВ:** рдЬрдм рд╕рднреА рдПрдбрд┐рдЯрд┐рдВрдЧ рдкреВрд░реА рд╣реЛ рдЬрд╛рдП рдФрд░ рд▓рд┐рд╕реНрдЯ рдореЗрдВ рд╕рд╛рд░реА рдЗрдореЗрдЬ рд╕рд╣реА рдХреНрд░рдо рдореЗрдВ рд╣реЛрдВ, рддреЛ $\mathbf{"рд╕рднреА\ рдПрдбрд┐рдЯреЗрдб\ рдЗрдореЗрдЬ\ рдХреЛ\ PDF\ рдореЗрдВ\ рдХрдиреНрд╡рд░реНрдЯ\ рдХрд░реЗрдВ"}$ рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред</li>
                <li>**рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ:** $\mathbf{jsPDF}$ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЖрдкрдХреЗ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рд╣реА PDF рдХреЛ рдмрдирд╛рдПрдЧреА рдФрд░ рдпрд╣ рддреБрд░рдВрдд рдЖрдкрдХреЗ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рдбрд╛рдЙрдирд▓реЛрдб рд╣реЛ рдЬрд╛рдПрдЧреАред</li>
            </ol>

            <hr>
            
            <h2>рдпрд╣ рдЯреВрд▓ YouTubers рдФрд░ рдХреНрд░рд┐рдПрдЯрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдХреНрдпреЛрдВ рдЙрдкрдпреЛрдЧреА рд╣реИ?</h2>
            <p>рдПрдХ YouTuber рдХреЗ рд░реВрдк рдореЗрдВ, рдЖрдкрдХреЛ рдЕрдХреНрд╕рд░ рдЕрдкрдиреЗ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд┐рдЯрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдЪрд╛рд╣реЗ рд╡рд╣ рдЖрдкрдХреЗ рд╡реАрдбрд┐рдпреЛ рдХреЗ рд▓рд┐рдП $\mathbf{рд╕реНрдХреНрд░рд┐рдкреНрдЯ\ рдХреЗ\ рдиреЛрдЯреНрд╕}$ рд╣реЛрдВ, $\mathbf{рдердВрдмрдиреЗрд▓\ рдЖрдЗрдбрд┐рдпрд╛рдЬ}$ рдХреЗ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯреНрд╕ рд╣реЛрдВ, рдпрд╛ $\mathbfрдХреНрд▓рд╛рдЗрдВрдЯреНрд╕\ рдХреЛ\ рднреЗрдЬрдиреЗ\ рдХреЗ\ рд▓рд┐рдП\ рдкреНрд░реВрдл\ рдСрдлрд╝\ рд╡рд░реНрдХ}$ рд╣реЛ, рдЗрди рд╕рднреА рдЗрдореЗрдЬреЗрд╕ рдХреЛ рдПрдХ рдкреНрд░реЛрдлреЗрд╢рдирд▓ $\mathbf{PDF}$ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдирд╛ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реЛрддрд╛ рд╣реИред рдпрд╣ рдЯреВрд▓ рдЖрдкрдХреЛ рд╡рд╣ рдирд┐рдпрдВрддреНрд░рдг рджреЗрддрд╛ рд╣реИ рдЬреЛ рдЕрдиреНрдп рд╕рд╛рдзрд╛рд░рдг рдХрдирд╡рд░реНрдЯрд░ рдирд╣реАрдВ рджреЗрддреЗтАФрдЦрд╛рд╕рдХрд░ $\mathbf{рдлрд╝рд┐рд▓реНрдЯрд░\ рдФрд░\ рдХреНрд░реЙрдкрд┐рдВрдЧ}$ рдХрд╛ рд╡рд┐рдХрд▓реНрдк, рдЬреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ PDF рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╣рдореЗрд╢рд╛ **рд╕рд╛рдлрд╝ рдФрд░ рдЖрдХрд░реНрд╖рдХ** рджрд┐рдЦреЗрдВред рд╣рдорд╛рд░рд╛ рдЯреВрд▓ рдЖрдкрдХреА рд╕рдордп рдФрд░ рдореЗрд╣рдирдд рджреЛрдиреЛрдВ рдмрдЪрд╛рддрд╛ рд╣реИред</p>
            </div>

    </div>

    <div id="crop-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>рдЗрдореЗрдЬ рдХреНрд░реЙрдк рдХрд░реЗрдВ рдФрд░ рдПрдбрд┐рдЯ рдХрд░реЗрдВ</h2>
            <div id="crop-image-container">
                <img id="crop-image" alt="рдХреНрд░реЙрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдореЗрдЬ">
            </div>
            <button class="button convert-button" style="width:auto; float:right;" onclick="applyCropAndFilter()">рдХреНрд░реЙрдк рдФрд░ рдлрд╝рд┐рд▓реНрдЯрд░ рд▓рд╛рдЧреВ рдХрд░реЗрдВ</button>
            
            <label for="modal-filter-select" style="font-weight: normal;">рдХрд▓рд░ рдлрд╝рд┐рд▓реНрдЯрд░:</label>
            <select id="modal-filter-select" class="filter-select" style="width: 200px;">
                <option value="original">Original</option>
                <option value="grayscale">Black & White (Grayscale)</option>
                <option value="sepia">Soft Tone (Sepia)</option>
                <option value="vibrant">Vibrant (Saturation)</option>
            </select>
        </div>
    </div>

    <script>
        // **********************************************
        // ********* JAvaScript Logic (Same as before) *********
        // **********************************************
        const { jsPDF } = window.jspdf;
        const imageList = document.getElementById('image-list');
        const imageUpload = document.getElementById('image-upload');
        const cropModal = document.getElementById('crop-modal');
        const cropImage = document.getElementById('crop-image');
        const modalFilterSelect = document.getElementById('modal-filter-select');
        const descriptionContent = document.getElementById('description-content');
        const toggleDescriptionBtn = document.getElementById('toggle-description-btn');

        let imagesData = [];
        let cropperInstance = null;
        let currentImageId = null;

        // рдирдП рдлрдВрдХреНрд╢рди: рдЬрд╛рдирдХрд╛рд░реА рд╕реЗрдХреНрд╢рди рдХреЛ рджрд┐рдЦрд╛рдирд╛/рдЫреБрдкрд╛рдирд╛
        function toggleDescription() {
            if (descriptionContent.style.display === 'none' || descriptionContent.style.display === '') {
                descriptionContent.style.display = 'block';
                toggleDescriptionBtn.textContent = 'рдЯреВрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА, рдЙрдкрдпреЛрдЧ рдФрд░ рдлрд╛рдпрджреЗ (рдЫреБрдкрд╛рдПрдБ)';
            } else {
                descriptionContent.style.display = 'none';
                toggleDescriptionBtn.textContent = 'рдЯреВрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА, рдЙрдкрдпреЛрдЧ рдФрд░ рдлрд╛рдпрджреЗ (400+ рд╢рдмреНрдж)';
            }
        }

        // 1. рдорд▓реНрдЯреАрдкрд▓ рдЗрдореЗрдЬ рдХреЛ рд╣реИрдВрдбрд▓ рдХрд░рдирд╛ (Code is same)
        imageUpload.addEventListener('change', (event) => {
            const files = event.target.files;
            Array.from(files).forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        addImageCard(e.target.result);
                    };
                    reader.readAsDataURL(file);
                }
            });
            imageUpload.value = '';
        });

        // 2. рдЗрдореЗрдЬ рд▓рд┐рд╕реНрдЯ рдореЗрдВ рдХрд╛рд░реНрдб рдмрдирд╛рдирд╛ (Code is same)
        function addImageCard(dataURL) {
            const id = Date.now();
            
            const newImage = {
                id: id,
                originalDataURL: dataURL,
                editedDataURL: dataURL,
                filter: 'original',
                cropData: null,
            };
            imagesData.push(newImage);

            const card = document.createElement('div');
            card.className = 'image-card';
            card.dataset.id = id;

            card.innerHTML = `
                <img src="${dataURL}" alt="Uploaded Image" id="img-preview-${id}">
                <select id="filter-select-${id}" class="filter-select" onchange="updateFilter(${id}, this.value)">
                    <option value="original">Original</option>
                    <option value="grayscale">Black & White</option>
                    <option value="sepia">Soft Tone (Sepia)</option>
                    <option value="vibrant">Vibrant</option>
                </select>
                <div class="edit-controls">
                    <button class="button" onclick="openCropModal(${id})">рдХреНрд░реЙрдк / рдПрдбрд╡рд╛рдВрд╕ рдлрд╝рд┐рд▓реНрдЯрд░</button>
                    <button class="button delete-btn" onclick="deleteImage(${id})">рд╣рдЯрд╛рдПрдБ</button>
                </div>
            `;
            imageList.appendChild(card);
        }

        // 3. рд╕рд┐рдВрдЧрд▓ рдлрд╝рд┐рд▓реНрдЯрд░ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ (рд╕рд┐рд░реНрдлрд╝ рдкреНрд░реАрд╡реНрдпреВ рдХреЗ рд▓рд┐рдП)
        function updateFilter(id, filterValue) {
            const imgData = imagesData.find(img => img.id === id);
            const imgElement = document.getElementById(`img-preview-${id}`);
            
            imgData.filter = filterValue; 

            // CSS Filter рд╕рд┐рд░реНрдлрд╝ рдкреНрд░реАрд╡реНрдпреВ рдкрд░ рд▓рд╛рдЧреВ рдХрд░реЗрдВ
            applyCssFilter(imgElement, filterValue);
        }

        function applyCssFilter(element, filter) {
            switch (filter) {
                case 'grayscale':
                    element.style.filter = 'grayscale(100%)';
                    break;
                case 'sepia':
                    element.style.filter = 'sepia(80%) saturate(120%)';
                    break;
                case 'vibrant':
                    element.style.filter = 'saturate(150%) brightness(110%)';
                    break;
                case 'original':
                default:
                    element.style.filter = 'none';
                    break;
            }
        }

        // 4. рдХреНрд░реЙрдкрд┐рдВрдЧ рдореЙрдбрд▓ рдЦреЛрд▓рдирд╛ (Code is same)
        function openCropModal(id) {
            const imgData = imagesData.find(img => img.id === id);
            currentImageId = id;
            
            if (cropperInstance) {
                cropperInstance.destroy();
            }

            cropImage.src = imgData.originalDataURL;
            modalFilterSelect.value = imgData.filter; 
            
            cropModal.style.display = "block";
            
            setTimeout(() => {
                cropperInstance = new Cropper(cropImage, {
                    aspectRatio: NaN, 
                    viewMode: 1,
                    initialAspectRatio: imgData.cropData ? imgData.cropData.width / imgData.cropData.height : NaN,
                    ready: function () {
                        if (imgData.cropData) {
                            this.cropper.setData(imgData.cropData);
                        }
                    }
                });
            }, 100);
        }
        
        // 5. рдХреНрд░реЙрдкрд┐рдВрдЧ рдФрд░ рдлрд╝рд┐рд▓реНрдЯрд░ рд▓рд╛рдЧреВ рдХрд░рдирд╛ (Code is same)
        function applyCropAndFilter() {
            const id = currentImageId;
            const imgData = imagesData.find(img => img.id === id);
            const selectedFilter = modalFilterSelect.value;

            if (!cropperInstance) return;

            const cropData = cropperInstance.getData();
            imgData.cropData = cropData; 

            const croppedCanvas = cropperInstance.getCroppedCanvas();
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            canvas.width = croppedCanvas.width;
            canvas.height = croppedCanvas.height;

            applyCanvasFilter(ctx, selectedFilter);

            ctx.drawImage(croppedCanvas, 0, 0, canvas.width, canvas.height);

            const finalDataURL = canvas.toDataURL('image/jpeg', 0.9);
            
            imgData.editedDataURL = finalDataURL;
            imgData.filter = selectedFilter; 
            
            const previewImg = document.getElementById(`img-preview-${id}`);
            previewImg.src = finalDataURL;
            previewImg.style.filter = 'none'; 
            
            document.getElementById(`filter-select-${id}`).value = selectedFilter;
            
            closeModal();
            alert("рдХреНрд░реЙрдк рдФрд░ рдлрд╝рд┐рд▓реНрдЯрд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд▓рд╛рдЧреВ рдХрд┐рдП рдЧрдП!");
        }

        function applyCanvasFilter(ctx, filter) {
            switch (filter) {
                case 'grayscale':
                    ctx.filter = 'grayscale(100%)';
                    break;
                case 'sepia':
                    ctx.filter = 'sepia(80%) saturate(120%)';
                    break;
                case 'vibrant':
                    ctx.filter = 'saturate(150%) brightness(110%)';
                    break;
                case 'original':
                default:
                    ctx.filter = 'none';
                    break;
            }
        }

        // 6. рдореЙрдбрд▓ рдмрдВрдж рдХрд░рдирд╛ (Code is same)
        function closeModal() {
            cropModal.style.display = "none";
            if (cropperInstance) {
                cropperInstance.destroy();
                cropperInstance = null;
            }
        }
        
        // 7. рдЗрдореЗрдЬ рд╣рдЯрд╛рдирд╛ (Code is same)
        function deleteImage(id) {
            const card = document.querySelector(`.image-card[data-id="${id}"]`);
            if (card) {
                card.remove();
                imagesData = imagesData.filter(img => img.id !== id);
            }
        }

        // 8. PDF рдореЗрдВ рдХрдиреНрд╡рд░реНрдЯ рдХрд░рдирд╛ (Code is same)
        function convertToPDF() {
            if (imagesData.length === 0) {
                alert("рдкрд╣рд▓реЗ рдПрдХ рдпрд╛ рдПрдХ рд╕реЗ рдЬрд╝реНрдпрд╛рджрд╛ рдЗрдореЗрдЬ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ!");
                return;
            }

            const doc = new jsPDF();
            let isFirstPage = true;

            imagesData.forEach((imgData, index) => {
                if (!isFirstPage) {
                    doc.addPage();
                }
                
                const finalDataURL = imgData.editedDataURL; 

                const imgProps = doc.getImageProperties(finalDataURL);
                const pdfWidth = doc.internal.pageSize.getWidth();
                const pdfHeight = doc.internal.pageSize.getHeight();
                const ratio = imgProps.width / imgProps.height;
                
                let finalImgWidth = pdfWidth * 0.9;
                let finalImgHeight = finalImgWidth / ratio;

                if (finalImgHeight > pdfHeight * 0.9) { 
                    finalImgHeight = pdfHeight * 0.9;
                    finalImgWidth = finalImgHeight * ratio;
                }

                const x = (pdfWidth - finalImgWidth) / 2;
                const y = (pdfHeight - finalImgHeight) / 2;

                doc.addImage(finalDataURL, 'JPEG', x, y, finalImgWidth, finalImgHeight);
                isFirstPage = false;

                if (index === imagesData.length - 1) {
                    doc.save("edited_images_to_pdf.pdf");
                }
            });
        }
    </script>
</body>
</html>
